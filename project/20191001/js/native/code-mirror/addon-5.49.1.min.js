/**** comment/comment.js ****/
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var T={},L=/[^\s\u00a0]/,O=e.Pos;function d(e){var t=e.search(L);return-1==t?0:t}function A(e,t){var n=e.getMode();return!1!==n.useInnerComments&&n.innerMode?e.getModeAt(t):n}e.commands.toggleComment=function(e){e.toggleComment()},e.defineExtension("toggleComment",function(e){e=e||T;for(var t=this,n=1/0,r=this.listSelections(),o=null,i=r.length-1;0<=i;i--){var l=r[i].from(),a=r[i].to();l.line>=n||(a.line>=n&&(a=O(n,0)),n=l.line,null==o?o=t.uncomment(l,a,e)?"un":(t.lineComment(l,a,e),"line"):"un"==o?t.uncomment(l,a,e):t.lineComment(l,a,e))}}),e.defineExtension("lineComment",function(i,e,l){l=l||T;var a=this,t=A(a,i),n=a.getLine(i.line);if(null!=n&&!function(e,t,n){return/\bstring\b/.test(e.getTokenTypeAt(O(t.line,0)))&&!/^[\'\"\`]/.test(n)}(a,i,n)){var s=l.lineComment||t.lineComment;if(s){var c=Math.min(0!=e.ch||e.line==i.line?e.line+1:e.line,a.lastLine()+1),f=null==l.padding?" ":l.padding,u=l.commentBlankLines||i.line==e.line;a.operation(function(){if(l.indent){for(var e=null,t=i.line;t<c;++t){var n=(r=a.getLine(t)).slice(0,d(r));(null==e||e.length>n.length)&&(e=n)}for(t=i.line;t<c;++t){var r=a.getLine(t),o=e.length;(u||L.test(r))&&(r.slice(0,o)!=e&&(o=d(r)),a.replaceRange(e+s+f,O(t,0),O(t,o)))}}else for(t=i.line;t<c;++t)(u||L.test(a.getLine(t)))&&a.replaceRange(s+f,O(t,0))})}else(l.blockCommentStart||t.blockCommentStart)&&(l.fullLines=!0,a.blockComment(i,e,l))}}),e.defineExtension("blockComment",function(r,o,i){i=i||T;var l=this,a=A(l,r),s=i.blockCommentStart||a.blockCommentStart,c=i.blockCommentEnd||a.blockCommentEnd;if(s&&c){if(!/\bcomment\b/.test(l.getTokenTypeAt(O(r.line,0)))){var f=Math.min(o.line,l.lastLine());f!=r.line&&0==o.ch&&L.test(l.getLine(f))&&--f;var u=null==i.padding?" ":i.padding;r.line>f||l.operation(function(){if(0!=i.fullLines){var e=L.test(l.getLine(f));l.replaceRange(u+c,O(f)),l.replaceRange(s+u,O(r.line,0));var t=i.blockCommentLead||a.blockCommentLead;if(null!=t)for(var n=r.line+1;n<=f;++n)n==f&&!e||l.replaceRange(t+u,O(n,0))}else l.replaceRange(c,o),l.replaceRange(s,r)})}}else(i.lineComment||a.lineComment)&&0!=i.fullLines&&l.lineComment(r,o,i)}),e.defineExtension("uncomment",function(e,t,n){n=n||T;var o,i=this,r=A(i,e),l=Math.min(0!=t.ch||t.line==e.line?t.line:t.line-1,i.lastLine()),a=Math.min(e.line,l),s=n.lineComment||r.lineComment,c=[],f=null==n.padding?" ":n.padding;e:if(s){for(var u=a;u<=l;++u){var d=i.getLine(u),h=d.indexOf(s);if(-1<h&&!/comment/.test(i.getTokenTypeAt(O(u,h+1)))&&(h=-1),-1==h&&L.test(d))break e;if(-1<h&&L.test(d.slice(0,h)))break e;c.push(d)}if(i.operation(function(){for(var e=a;e<=l;++e){var t=c[e-a],n=t.indexOf(s),r=n+s.length;n<0||(t.slice(r,r+f.length)==f&&(r+=f.length),o=!0,i.replaceRange("",O(e,n),O(e,r)))}}),o)return!0}var p=n.blockCommentStart||r.blockCommentStart,m=n.blockCommentEnd||r.blockCommentEnd;if(!p||!m)return!1;var g=n.blockCommentLead||r.blockCommentLead,v=i.getLine(a),y=v.indexOf(p);if(-1==y)return!1;var b=l==a?v:i.getLine(l),C=b.indexOf(m,l==a?y+p.length:0),x=O(a,y+1),w=O(l,C+1);if(-1==C||!/comment/.test(i.getTokenTypeAt(x))||!/comment/.test(i.getTokenTypeAt(w))||-1<i.getRange(x,w,"\n").indexOf(m))return!1;var k=v.lastIndexOf(p,e.ch),S=-1==k?-1:v.slice(0,e.ch).indexOf(m,k+p.length);if(-1!=k&&-1!=S&&S+m.length!=e.ch)return!1;S=b.indexOf(m,t.ch);var M=b.slice(t.ch).lastIndexOf(p,S-t.ch);return k=-1==S||-1==M?-1:t.ch+M,(-1==S||-1==k||k==t.ch)&&(i.operation(function(){i.replaceRange("",O(l,C-(f&&b.slice(C-f.length,C)==f?f.length:0)),O(l,C+m.length));var e=y+p.length;if(f&&v.slice(e,e+f.length)==f&&(e+=f.length),i.replaceRange("",O(a,y),O(a,e)),g)for(var t=a+1;t<=l;++t){var n=i.getLine(t),r=n.indexOf(g);if(-1!=r&&!L.test(n.slice(0,r))){var o=r+g.length;f&&n.slice(o,o+f.length)==f&&(o+=f.length),i.replaceRange("",O(t,r),O(t,o))}}}),!0)})}),/**** comment/continuecomment.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(v){var r=/\S/g,y=String.prototype.repeat||function(e){return Array(e+1).join(this)};function i(t){if(t.getOption("disableInput"))return v.Pass;for(var e,n=t.listSelections(),r=[],o=0;o<n.length;o++){var i=n[o].head;if(!/\bcomment\b/.test(t.getTokenTypeAt(i)))return v.Pass;var l=t.getModeAt(i);if(e){if(e!=l)return v.Pass}else e=l;var a,s,c=null,f=e.blockCommentStart,u=e.lineComment;if(f&&e.blockCommentContinue){var d=(a=t.getLine(i.line)).lastIndexOf(e.blockCommentEnd,i.ch-e.blockCommentEnd.length);if(-1!=d&&d==i.ch-e.blockCommentEnd.length||u&&-1<(s=a.lastIndexOf(u,i.ch-1))&&/\bcomment\b/.test(t.getTokenTypeAt({line:i.line,ch:s+1})));else if(-1<(s=a.lastIndexOf(f,i.ch-f.length))&&d<s)if(b(0,a)>=s)c=a.slice(0,s);else{var h,p=t.options.tabSize;s=v.countColumn(a,s,p),c=t.options.indentWithTabs?y.call("\t",h=Math.floor(s/p))+y.call(" ",s-p*h):y.call(" ",s)}else-1<(s=a.indexOf(e.blockCommentContinue))&&s<=i.ch&&s<=b(0,a)&&(c=a.slice(0,s));null!=c&&(c+=e.blockCommentContinue)}if(null==c&&u&&C(t))if(null==a&&(a=t.getLine(i.line)),s=a.indexOf(u),i.ch||s){if(-1<s&&b(0,a)>=s){if(!(c=-1<b(i.ch,a))){var m=t.getLine(i.line+1)||"",g=m.indexOf(u);c=-1<g&&b(0,m)>=g||null}c=c&&a.slice(0,s)+u+a.slice(s+u.length).match(/^\s*/)[0]}}else c="";if(null==c)return v.Pass;r[o]="\n"+c}t.operation(function(){for(var e=n.length-1;0<=e;e--)t.replaceRange(r[e],n[e].from(),n[e].to(),"+insert")})}function b(e,t){r.lastIndex=e;var n=r.exec(t);return n?n.index:-1}function C(e){var t=e.getOption("continueComments");return!t||"object"!=typeof t||!1!==t.continueLineComment}v.defineOption("continueComments",null,function(e,t,n){if(n&&n!=v.Init&&e.removeKeyMap("continueComment"),t){var r="Enter";"string"==typeof t?r=t:"object"==typeof t&&t.key&&(r=t.key);var o={name:"continueComment"};o[r]=i,e.addKeyMap(o)}})}),/**** dialog/dialog.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(u){function d(e,t,n){var r,o=e.getWrapperElement();return(r=o.appendChild(document.createElement("div"))).className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?r.innerHTML=t:r.appendChild(t),u.addClass(o,"dialog-opened"),r}function h(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}u.defineExtension("openDialog",function(e,t,n){n=n||{},h(this,null);var r=d(this,e,n.bottom),o=!1,i=this;function l(e){if("string"==typeof e)s.value=e;else{if(o)return;o=!0,u.rmClass(r.parentNode,"dialog-opened"),r.parentNode.removeChild(r),i.focus(),n.onClose&&n.onClose(r)}}var a,s=r.getElementsByTagName("input")[0];return s?(s.focus(),n.value&&(s.value=n.value,!1!==n.selectValueOnOpen&&s.select()),n.onInput&&u.on(s,"input",function(e){n.onInput(e,s.value,l)}),n.onKeyUp&&u.on(s,"keyup",function(e){n.onKeyUp(e,s.value,l)}),u.on(s,"keydown",function(e){n&&n.onKeyDown&&n.onKeyDown(e,s.value,l)||((27==e.keyCode||!1!==n.closeOnEnter&&13==e.keyCode)&&(s.blur(),u.e_stop(e),l()),13==e.keyCode&&t(s.value,e))}),!1!==n.closeOnBlur&&u.on(s,"blur",l)):(a=r.getElementsByTagName("button")[0])&&(u.on(a,"click",function(){l(),i.focus()}),!1!==n.closeOnBlur&&u.on(a,"blur",l),a.focus()),l}),u.defineExtension("openConfirm",function(e,t,n){h(this,null);var r=d(this,e,n&&n.bottom),o=r.getElementsByTagName("button"),i=!1,l=this,a=1;function s(){i||(i=!0,u.rmClass(r.parentNode,"dialog-opened"),r.parentNode.removeChild(r),l.focus())}o[0].focus();for(var c=0;c<o.length;++c){var f=o[c];!function(t){u.on(f,"click",function(e){u.e_preventDefault(e),s(),t&&t(l)})}(t[c]),u.on(f,"blur",function(){--a,setTimeout(function(){a<=0&&s()},200)}),u.on(f,"focus",function(){++a})}}),u.defineExtension("openNotification",function(e,t){h(this,l);var n,r=d(this,e,t&&t.bottom),o=!1,i=t&&void 0!==t.duration?t.duration:5e3;function l(){o||(o=!0,clearTimeout(n),u.rmClass(r.parentNode,"dialog-opened"),r.parentNode.removeChild(r))}return u.on(r,"click",function(e){u.e_preventDefault(e),l()}),i&&(n=setTimeout(l,i)),l})}),/**** display/autorefresh.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){"use strict";function o(e,t){clearTimeout(t.timeout),r.off(window,"mouseup",t.hurry),r.off(window,"keyup",t.hurry)}r.defineOption("autoRefresh",!1,function(e,t){e.state.autoRefresh&&(o(e,e.state.autoRefresh),e.state.autoRefresh=null),t&&0==e.display.wrapper.offsetHeight&&function(e,t){function n(){e.display.wrapper.offsetHeight?(o(e,t),e.display.lastWrapHeight!=e.display.wrapper.clientHeight&&e.refresh()):t.timeout=setTimeout(n,t.delay)}t.timeout=setTimeout(n,t.delay),t.hurry=function(){clearTimeout(t.timeout),t.timeout=setTimeout(n,50)},r.on(window,"mouseup",t.hurry),r.on(window,"keyup",t.hurry)}(e,e.state.autoRefresh={delay:t.delay||250})})}),/**** display/fullscreen.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){"use strict";r.defineOption("fullScreen",!1,function(e,t,n){n==r.Init&&(n=!1),!n!=!t&&(t?function(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}(e):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}(e))})}),/**** display/panel.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function a(e,t,n,r){this.cm=e,this.node=t,this.options=n,this.height=r,this.cleared=!1}function s(e,t){for(var n=t.nextSibling;n;n=n.nextSibling)if(n==e.getWrapperElement())return!0;return!1}e.defineExtension("addPanel",function(e,t){t=t||{},this.state.panels||function(r){var e=r.getWrapperElement(),t=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,o=parseInt(t.height),i=r.state.panels={setHeight:e.style.height,heightLeft:o,panels:0,wrapper:document.createElement("div")};e.parentNode.insertBefore(i.wrapper,e);var n=r.hasFocus();i.wrapper.appendChild(e),n&&r.focus();r._setSize=r.setSize,null!=o&&(r.setSize=function(e,t){if(null==t)return this._setSize(e,t);if("number"!=typeof(i.setHeight=t)){var n=/^(\d+\.?\d*)px$/.exec(t);n?t=Number(n[1]):(i.wrapper.style.height=t,t=i.wrapper.offsetHeight,i.wrapper.style.height="")}r._setSize(e,i.heightLeft+=t-o),o=t})}(this);var n=this.state.panels,r=n.wrapper,o=this.getWrapperElement(),i=t.replace instanceof a&&!t.replace.cleared;t.after instanceof a&&!t.after.cleared?r.insertBefore(e,t.before.node.nextSibling):t.before instanceof a&&!t.before.cleared?r.insertBefore(e,t.before.node):i?(r.insertBefore(e,t.replace.node),n.panels++,t.replace.clear()):"bottom"==t.position?r.appendChild(e):"before-bottom"==t.position?r.insertBefore(e,o.nextSibling):"after-top"==t.position?r.insertBefore(e,o):r.insertBefore(e,r.firstChild);var l=t&&t.height||e.offsetHeight;return this._setSize(null,n.heightLeft-=l),i||n.panels++,t.stable&&s(this,e)&&this.scrollTo(null,this.getScrollInfo().top+l),new a(this,e,t,l)}),a.prototype.clear=function(){if(!this.cleared){this.cleared=!0;var e=this.cm.state.panels;this.cm._setSize(null,e.heightLeft+=this.height),this.options.stable&&s(this.cm,this.node)&&this.cm.scrollTo(null,this.cm.getScrollInfo().top-this.height),e.wrapper.removeChild(this.node),0==--e.panels&&function(e){var t=e.state.panels;e.state.panels=null;var n=e.getWrapperElement();t.wrapper.parentNode.replaceChild(n,t.wrapper),n.style.height=t.setHeight,e.setSize=e._setSize,e.setSize()}(this.cm)}},a.prototype.changed=function(e){var t=null==e?this.node.offsetHeight:e,n=this.cm.state.panels;this.cm._setSize(null,n.heightLeft-=t-this.height),this.height=t}}),/**** display/placeholder.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(i){function l(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function r(e){l(e);var t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.style.direction=e.getOption("direction"),t.className="CodeMirror-placeholder CodeMirror-line-like";var n=e.getOption("placeholder");"string"==typeof n&&(n=document.createTextNode(n)),t.appendChild(n),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function a(e){o(e)&&r(e)}function s(e){var t=e.getWrapperElement(),n=o(e);t.className=t.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),n?r(e):l(e)}function o(e){return 1===e.lineCount()&&""===e.getLine(0)}i.defineOption("placeholder","",function(e,t,n){var r=n&&n!=i.Init;if(t&&!r)e.on("blur",a),e.on("change",s),e.on("swapDoc",s),s(e);else if(!t&&r){e.off("blur",a),e.off("change",s),e.off("swapDoc",s),l(e);var o=e.getWrapperElement();o.className=o.className.replace(" CodeMirror-empty","")}t&&!e.hasFocus()&&a(e)})}),/**** display/rulers.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(s){"use strict";function n(e){e.state.rulerDiv.textContent="";var t=e.getOption("rulers"),n=e.defaultCharWidth(),r=e.charCoords(s.Pos(e.firstLine(),0),"div").left;e.state.rulerDiv.style.minHeight=e.display.scroller.offsetHeight+30+"px";for(var o=0;o<t.length;o++){var i=document.createElement("div");i.className="CodeMirror-ruler";var l,a=t[o];"number"==typeof a?l=a:(l=a.column,a.className&&(i.className+=" "+a.className),a.color&&(i.style.borderColor=a.color),a.lineStyle&&(i.style.borderLeftStyle=a.lineStyle),a.width&&(i.style.borderLeftWidth=a.width)),i.style.left=r+l*n+"px",e.state.rulerDiv.appendChild(i)}}s.defineOption("rulers",!1,function(e,t){e.state.rulerDiv&&(e.state.rulerDiv.parentElement.removeChild(e.state.rulerDiv),e.state.rulerDiv=null,e.off("refresh",n)),t&&t.length&&(e.state.rulerDiv=e.display.lineSpace.parentElement.insertBefore(document.createElement("div"),e.display.lineSpace),e.state.rulerDiv.className="CodeMirror-rulers",n(e),e.on("refresh",n))})}),/**** edit/closebrackets.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(w){var n={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},k=w.Pos;function S(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==typeof e&&null!=e[t]?e[t]:n[t]}w.defineOption("autoCloseBrackets",!1,function(e,t,n){n&&n!=w.Init&&(e.removeKeyMap(o),e.state.closeBrackets=null),t&&(r(S(t,"pairs")),e.state.closeBrackets=t,e.addKeyMap(o))});var o={Backspace:function(e){var t=M(e);if(!t||e.getOption("disableInput"))return w.Pass;for(var n=S(t,"pairs"),r=e.listSelections(),o=0;o<r.length;o++){if(!r[o].empty())return w.Pass;var i=a(e,r[o].head);if(!i||n.indexOf(i)%2!=0)return w.Pass}for(o=r.length-1;0<=o;o--){var l=r[o].head;e.replaceRange("",k(l.line,l.ch-1),k(l.line,l.ch+1),"+delete")}},Enter:function(r){var e=M(r),t=e&&S(e,"explode");if(!t||r.getOption("disableInput"))return w.Pass;for(var o=r.listSelections(),n=0;n<o.length;n++){if(!o[n].empty())return w.Pass;var i=a(r,o[n].head);if(!i||t.indexOf(i)%2!=0)return w.Pass}r.operation(function(){var e=r.lineSeparator()||"\n";r.replaceSelection(e+e,null),r.execCommand("goCharLeft"),o=r.listSelections();for(var t=0;t<o.length;t++){var n=o[t].head.line;r.indentLine(n,null,!0),r.indentLine(n+1,null,!0)}})}};function r(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),r="'"+n+"'";o[r]||(o[r]=i(n))}}function i(t){return function(e){return function(o,e){var t=M(o);if(!t||o.getOption("disableInput"))return w.Pass;var n=S(t,"pairs"),r=n.indexOf(e);if(-1==r)return w.Pass;for(var i,l=S(t,"closeBefore"),a=S(t,"triples"),s=n.charAt(r+1)==e,c=o.listSelections(),f=r%2==0,u=0;u<c.length;u++){var d,h=c[u],p=h.head,m=o.getRange(p,k(p.line,p.ch+1));if(f&&!h.empty())d="surround";else if(!s&&f||m!=e)if(s&&1<p.ch&&0<=a.indexOf(e)&&o.getRange(k(p.line,p.ch-2),p)==e+e){if(2<p.ch&&/\bstring/.test(o.getTokenTypeAt(k(p.line,p.ch-2))))return w.Pass;d="addFour"}else if(s){var g=0==p.ch?" ":o.getRange(k(p.line,p.ch-1),p);if(w.isWordChar(m)||g==e||w.isWordChar(g))return w.Pass;d="both"}else{if(!f||!(0===m.length||/\s/.test(m)||-1<l.indexOf(m)))return w.Pass;d="both"}else d=!s||(y=p,void 0,b=(v=o).getTokenAt(k(y.line,y.ch+1)),!/\bstring/.test(b.type)||b.start!=y.ch||0!=y.ch&&/\bstring/.test(v.getTokenTypeAt(y)))?0<=a.indexOf(e)&&o.getRange(p,k(p.line,p.ch+3))==e+e+e?"skipThree":"skip":"both";if(i){if(i!=d)return w.Pass}else i=d}var v,y,b;var C=r%2?n.charAt(r-1):e,x=r%2?e:n.charAt(r+1);o.operation(function(){if("skip"==i)o.execCommand("goCharRight");else if("skipThree"==i)for(var e=0;e<3;e++)o.execCommand("goCharRight");else if("surround"==i){var t=o.getSelections();for(e=0;e<t.length;e++)t[e]=C+t[e]+x;o.replaceSelections(t,"around"),t=o.listSelections().slice();for(e=0;e<t.length;e++)t[e]=(n=t[e],void 0,r=0<w.cmpPos(n.anchor,n.head),{anchor:new k(n.anchor.line,n.anchor.ch+(r?-1:1)),head:new k(n.head.line,n.head.ch+(r?1:-1))});o.setSelections(t)}else"both"==i?(o.replaceSelection(C+x,null),o.triggerElectric(C+x),o.execCommand("goCharLeft")):"addFour"==i&&(o.replaceSelection(C+C+C+C,"before"),o.execCommand("goCharRight"));var n,r})}(e,t)}}function M(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function a(e,t){var n=e.getRange(k(t.line,t.ch-1),k(t.line,t.ch+1));return 2==n.length?n:null}r(n.pairs+"`")}),/**** edit/closetag.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(C){C.defineOption("autoCloseTags",!1,function(e,t,n){if(n!=C.Init&&n&&e.removeKeyMap("autoCloseTags"),t){var r={name:"autoCloseTags"};"object"==typeof t&&!t.whenClosing||(r["'/'"]=function(e){return function(e){return e.getOption("disableInput")?C.Pass:o(e,!0)}(e)}),"object"==typeof t&&!t.whenOpening||(r["'>'"]=function(e){return function(e){if(e.getOption("disableInput"))return C.Pass;for(var t=e.listSelections(),n=[],r=e.getOption("autoCloseTags"),o=0;o<t.length;o++){if(!t[o].empty())return C.Pass;var i=t[o].head,l=e.getTokenAt(i),a=C.innerMode(e.getMode(),l.state),s=a.state,c=a.mode.xmlCurrentTag&&a.mode.xmlCurrentTag(s),f=c&&c.name;if(!f)return C.Pass;var u="html"==a.mode.configuration,d="object"==typeof r&&r.dontCloseTags||u&&x,h="object"==typeof r&&r.indentTags||u&&w;l.end>i.ch&&(f=f.slice(0,f.length-l.end+i.ch));var p=f.toLowerCase();if(!f||"string"==l.type&&(l.end!=i.ch||!/[\"\']/.test(l.string.charAt(l.string.length-1))||1==l.string.length)||"tag"==l.type&&c.close||l.string.indexOf("/")==l.string.length-1||d&&-1<k(d,p)||S(e,a.mode.xmlCurrentContext&&a.mode.xmlCurrentContext(s)||[],f,i,!0))return C.Pass;var m="object"==typeof r&&r.emptyTags;if(m&&-1<k(m,f))n[o]={text:"/>",newPos:C.Pos(i.line,i.ch+2)};else{var g=h&&-1<k(h,p);n[o]={indent:g,text:">"+(g?"\n\n":"")+"</"+f+">",newPos:g?C.Pos(i.line+1,0):C.Pos(i.line,i.ch+1)}}}var v="object"==typeof r&&r.dontIndentOnAutoClose;for(o=t.length-1;0<=o;o--){var y=n[o];e.replaceRange(y.text,t[o].head,t[o].anchor,"+insert");var b=e.listSelections().slice(0);b[o]={head:y.newPos,anchor:y.newPos},e.setSelections(b),!v&&y.indent&&(e.indentLine(y.newPos.line,null,!0),e.indentLine(y.newPos.line+1,null,!0))}}(e)}),e.addKeyMap(r)}});var x=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],w=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function o(e,t){for(var n=e.listSelections(),r=[],o=t?"/":"</",i=e.getOption("autoCloseTags"),l="object"==typeof i&&i.dontIndentOnSlash,a=0;a<n.length;a++){if(!n[a].empty())return C.Pass;var s=n[a].head,c=e.getTokenAt(s),f=C.innerMode(e.getMode(),c.state),u=f.state;if(t&&("string"==c.type||"<"!=c.string.charAt(0)||c.start!=s.ch-1))return C.Pass;var d,h="xml"!=f.mode.name&&"htmlmixed"==e.getMode().name;if(h&&"javascript"==f.mode.name)d=o+"script";else if(h&&"css"==f.mode.name)d=o+"style";else{var p=f.mode.xmlCurrentContext&&f.mode.xmlCurrentContext(u);if(!p||p.length&&S(e,p,p[p.length-1],s))return C.Pass;d=o+p[p.length-1]}">"!=e.getLine(s.line).charAt(c.end)&&(d+=">"),r[a]=d}if(e.replaceSelections(r),n=e.listSelections(),!l)for(a=0;a<n.length;a++)(a==n.length-1||n[a].head.line<n[a+1].head.line)&&e.indentLine(n[a].head.line)}function k(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function S(e,t,n,r,o){if(!C.scanForClosingTag)return!1;var i=Math.min(e.lastLine()+1,r.line+500),l=C.scanForClosingTag(e,r,null,i);if(!l||l.tag!=n)return!1;for(var a=o?1:0,s=t.length-1;0<=s&&t[s]==n;s--)++a;r=l.to;for(s=1;s<a;s++){var c=C.scanForClosingTag(e,r,null,i);if(!c||c.tag!=n)return!1;r=c.to}return!0}C.commands.closeTag=function(e){return o(e)}}),/**** edit/continuelist.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(g){"use strict";var v=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,y=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,b=/[*+-]\s/;function C(e,t){var n=t.line,r=0,o=0,i=v.exec(e.getLine(n)),l=i[1];do{var a=n+(r+=1),s=e.getLine(a),c=v.exec(s);if(c){var f=c[1],u=parseInt(i[3],10)+r-o,d=parseInt(c[3],10),h=d;if(l!==f||isNaN(d)){if(l.length>f.length)return;if(l.length<f.length&&1===r)return;o+=1}else u===d&&(h=d+1),d<u&&(h=1+u),e.replaceRange(s.replace(v,f+h+c[4]+c[5]),{line:a,ch:0},{line:a,ch:s.length})}}while(c)}g.commands.newlineAndIndentContinueMarkdownList=function(e){if(e.getOption("disableInput"))return g.Pass;for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var o=t[r].head,i=e.getStateAfter(o.line),l=g.innerMode(e.getMode(),i);if("markdown"!==l.mode.name)return void e.execCommand("newlineAndIndent");var a=!1!==(i=l.state).list,s=0!==i.quote,c=e.getLine(o.line),f=v.exec(c),u=/^\s*$/.test(c.slice(0,o.ch));if(!t[r].empty()||!a&&!s||!f||u)return void e.execCommand("newlineAndIndent");if(y.test(c))/>\s*$/.test(c)||e.replaceRange("",{line:o.line,ch:0},{line:o.line,ch:o.ch+1}),n[r]="\n";else{var d=f[1],h=f[5],p=!(b.test(f[2])||0<=f[2].indexOf(">")),m=p?parseInt(f[3],10)+1+f[4]:f[2].replace("x"," ");n[r]="\n"+d+m+h,p&&C(e,o)}}e.replaceSelections(n)}}),/**** edit/matchbrackets.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){var f=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),g=r.Pos,v={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function y(e){return e&&e.bracketRegex||/[(){}[\]]/}function u(e,t,n){var r=e.getLineHandle(t.line),o=t.ch-1,i=n&&n.afterCursor;null==i&&(i=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var l=y(n),a=!i&&0<=o&&l.test(r.text.charAt(o))&&v[r.text.charAt(o)]||l.test(r.text.charAt(o+1))&&v[r.text.charAt(++o)];if(!a)return null;var s=">"==a.charAt(1)?1:-1;if(n&&n.strict&&0<s!=(o==t.ch))return null;var c=e.getTokenTypeAt(g(t.line,o+1)),f=d(e,g(t.line,o+(0<s?1:0)),s,c||null,n);return null==f?null:{from:g(t.line,o),to:f&&f.pos,match:f&&f.ch==a.charAt(0),forward:0<s}}function d(e,t,n,r,o){for(var i=o&&o.maxScanLineLength||1e4,l=o&&o.maxScanLines||1e3,a=[],s=y(o),c=0<n?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),f=t.line;f!=c;f+=n){var u=e.getLine(f);if(u){var d=0<n?0:u.length-1,h=0<n?u.length:-1;if(!(u.length>i))for(f==t.line&&(d=t.ch-(n<0?1:0));d!=h;d+=n){var p=u.charAt(d);if(s.test(p)&&(void 0===r||e.getTokenTypeAt(g(f,d+1))==r)){var m=v[p];if(m&&">"==m.charAt(1)==0<n)a.push(p);else{if(!a.length)return{pos:g(f,d),ch:p};a.pop()}}}}}return f-n!=(0<n?e.lastLine():e.firstLine())&&null}function t(e,t,n){for(var r=e.state.matchBrackets.maxHighlightLineLength||1e3,o=[],i=e.listSelections(),l=0;l<i.length;l++){var a=i[l].empty()&&u(e,i[l].head,n);if(a&&e.getLine(a.from.line).length<=r){var s=a.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";o.push(e.markText(a.from,g(a.from.line,a.from.ch+1),{className:s})),a.to&&e.getLine(a.to.line).length<=r&&o.push(e.markText(a.to,g(a.to.line,a.to.ch+1),{className:s}))}}if(o.length){f&&e.state.focused&&e.focus();function c(){e.operation(function(){for(var e=0;e<o.length;e++)o[e].clear()})}if(!t)return c;setTimeout(c,800)}}function o(e){e.operation(function(){e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null),e.state.matchBrackets.currentlyHighlighted=t(e,!1,e.state.matchBrackets)})}r.defineOption("matchBrackets",!1,function(e,t,n){n&&n!=r.Init&&(e.off("cursorActivity",o),e.state.matchBrackets&&e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null)),t&&(e.state.matchBrackets="object"==typeof t?t:{},e.on("cursorActivity",o))}),r.defineExtension("matchBrackets",function(){t(this,!0)}),r.defineExtension("findMatchingBracket",function(e,t,n){return!n&&"boolean"!=typeof t||(t=n?(n.strict=t,n):t?{strict:!0}:null),u(this,e,t)}),r.defineExtension("scanForBracket",function(e,t,n,r){return d(this,e,t,n,r)})}),/**** edit/matchtags.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(l){"use strict";function a(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function r(i){i.state.failedTagMatch=!1,i.operation(function(){if(a(i),!i.somethingSelected()){var e=i.getCursor(),t=i.getViewport();t.from=Math.min(t.from,e.line),t.to=Math.max(e.line+1,t.to);var n=l.findMatchingTag(i,e,t);if(n){if(i.state.matchBothTags){var r="open"==n.at?n.open:n.close;r&&(i.state.tagHit=i.markText(r.from,r.to,{className:"CodeMirror-matchingtag"}))}var o="close"==n.at?n.open:n.close;o?i.state.tagOther=i.markText(o.from,o.to,{className:"CodeMirror-matchingtag"}):i.state.failedTagMatch=!0}}})}function o(e){e.state.failedTagMatch&&r(e)}l.defineOption("matchTags",!1,function(e,t,n){n&&n!=l.Init&&(e.off("cursorActivity",r),e.off("viewportChange",o),a(e)),t&&(e.state.matchBothTags="object"==typeof t&&t.bothTags,e.on("cursorActivity",r),e.on("viewportChange",o),r(e))}),l.commands.toMatchingTag=function(e){var t=l.findMatchingTag(e,e.getCursor());if(t){var n="close"==t.at?t.open:t.close;n&&e.extendSelection(n.to,n.from)}}}),/**** edit/trailingspace.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){r.defineOption("showTrailingSpace",!1,function(e,t,n){n==r.Init&&(n=!1),n&&!t?e.removeOverlay("trailingspace"):!n&&t&&e.addOverlay({token:function(e){for(var t=e.string.length,n=t;n&&/\s/.test(e.string.charAt(n-1));--n);return n>e.pos?(e.pos=n,null):(e.pos=t,"trailingspace")},name:"trailingspace"})})}),/**** fold/brace-fold.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(y){"use strict";y.registerHelper("fold","brace",function(o,i){var l,a=i.line,s=o.getLine(a);function e(e){for(var t=i.ch,n=0;;){var r=t<=0?-1:s.lastIndexOf(e,t-1);if(-1!=r){if(1==n&&r<i.ch)break;if(l=o.getTokenTypeAt(y.Pos(a,r+1)),!/^(comment|string)/.test(l))return r+1;t=r-1}else{if(1==n)break;n=1,t=s.length}}}var t="{",n="}",r=e("{");if(null==r&&(n="]",r=e(t="[")),null!=r){var c,f,u=1,d=o.lastLine();e:for(var h=a;h<=d;++h)for(var p=o.getLine(h),m=h==a?r:0;;){var g=p.indexOf(t,m),v=p.indexOf(n,m);if(g<0&&(g=p.length),v<0&&(v=p.length),(m=Math.min(g,v))==p.length)break;if(o.getTokenTypeAt(y.Pos(h,m+1))==l)if(m==g)++u;else if(!--u){c=h,f=m;break e}++m}if(null!=c&&a!=c)return{from:y.Pos(a,r),to:y.Pos(c,f)}}}),y.registerHelper("fold","import",function(i,e){function t(e){if(e<i.firstLine()||e>i.lastLine())return null;var t=i.getTokenAt(y.Pos(e,1));if(/\S/.test(t.string)||(t=i.getTokenAt(y.Pos(e,t.end+1))),"keyword"!=t.type||"import"!=t.string)return null;for(var n=e,r=Math.min(i.lastLine(),e+10);n<=r;++n){var o=i.getLine(n).indexOf(";");if(-1!=o)return{startCh:t.end,end:y.Pos(n,o)}}}var n,r=e.line,o=t(r);if(!o||t(r-1)||(n=t(r-2))&&n.end.line==r-1)return null;for(var l=o.end;;){var a=t(l.line+1);if(null==a)break;l=a.end}return{from:i.clipPos(y.Pos(r,o.startCh+1)),to:l}}),y.registerHelper("fold","include",function(n,e){function t(e){if(e<n.firstLine()||e>n.lastLine())return null;var t=n.getTokenAt(y.Pos(e,1));return/\S/.test(t.string)||(t=n.getTokenAt(y.Pos(e,t.end+1))),"meta"==t.type&&"#include"==t.string.slice(0,8)?t.start+8:void 0}var r=e.line,o=t(r);if(null==o||null!=t(r-1))return null;for(var i=r;;){if(null==t(i+1))break;++i}return{from:y.Pos(r,o+1),to:n.clipPos(y.Pos(i))}})}),/**** fold/comment-fold.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(C){"use strict";C.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,t){var n=e.getModeAt(t),r=n.blockCommentStart,o=n.blockCommentEnd;if(r&&o){for(var i,l=t.line,a=e.getLine(l),s=t.ch,c=0;;){var f=s<=0?-1:a.lastIndexOf(r,s-1);if(-1!=f){if(1==c&&f<t.ch)return;if(/comment/.test(e.getTokenTypeAt(C.Pos(l,f+1)))&&(0==f||a.slice(f-o.length,f)==o||!/comment/.test(e.getTokenTypeAt(C.Pos(l,f))))){i=f+r.length;break}s=f-1}else{if(1==c)return;c=1,s=a.length}}var u,d,h=1,p=e.lastLine();e:for(var m=l;m<=p;++m)for(var g=e.getLine(m),v=m==l?i:0;;){var y=g.indexOf(r,v),b=g.indexOf(o,v);if(y<0&&(y=g.length),b<0&&(b=g.length),(v=Math.min(y,b))==g.length)break;if(v==y)++h;else if(!--h){u=m,d=v;break e}++v}if(null!=u&&(l!=u||d!=i))return{from:C.Pos(l,i),to:C.Pos(u,d)}}})}),/**** fold/foldcode.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(f){"use strict";function o(o,i,e,l){if(e&&e.call){var a=e;e=null}else a=u(o,e,"rangeFinder");"number"==typeof i&&(i=f.Pos(i,0));var s=u(o,e,"minFoldSize");function t(e){var t=a(o,i);if(!t||t.to.line-t.from.line<s)return null;for(var n=o.findMarksAt(t.from),r=0;r<n.length;++r)if(n[r].__isFold&&"fold"!==l){if(!e)return null;t.cleared=!0,n[r].clear()}return t}var n=t(!0);if(u(o,e,"scanUp"))for(;!n&&i.line>o.firstLine();)i=f.Pos(i.line-1,0),n=t(!1);if(n&&!n.cleared&&"unfold"!==l){var r=function(e,t){var n=u(e,t,"widget");if("string"==typeof n){var r=document.createTextNode(n);(n=document.createElement("span")).appendChild(r),n.className="CodeMirror-foldmarker"}else n=n&&n.cloneNode(!0);return n}(o,e);f.on(r,"mousedown",function(e){c.clear(),f.e_preventDefault(e)});var c=o.markText(n.from,n.to,{replacedWith:r,clearOnEnter:u(o,e,"clearOnEnter"),__isFold:!0});c.on("clear",function(e,t){f.signal(o,"unfold",o,e,t)}),f.signal(o,"fold",o,n.from,n.to)}}f.newFoldFunction=function(n,r){return function(e,t){o(e,t,{rangeFinder:n,widget:r})}},f.defineExtension("foldCode",function(e,t,n){o(this,e,t,n)}),f.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),f.commands.toggleFold=function(e){e.foldCode(e.getCursor())},f.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},f.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},f.commands.foldAll=function(n){n.operation(function(){for(var e=n.firstLine(),t=n.lastLine();e<=t;e++)n.foldCode(f.Pos(e,0),null,"fold")})},f.commands.unfoldAll=function(n){n.operation(function(){for(var e=n.firstLine(),t=n.lastLine();e<=t;e++)n.foldCode(f.Pos(e,0),null,"unfold")})},f.registerHelper("fold","combine",function(){var o=Array.prototype.slice.call(arguments,0);return function(e,t){for(var n=0;n<o.length;++n){var r=o[n](e,t);if(r)return r}}}),f.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),r=0;r<n.length;r++){var o=n[r](e,t);if(o)return o}});var i={rangeFinder:f.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function u(e,t,n){if(t&&void 0!==t[n])return t[n];var r=e.options.foldOptions;return r&&void 0!==r[n]?r[n]:i[n]}f.defineOption("foldOptions",null),f.defineExtension("foldOption",function(e,t){return u(this,e,t)})}),/**** fold/foldgutter.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(r){"use strict";r.defineOption("foldGutter",!1,function(e,t,n){n&&n!=r.Init&&(e.clearGutter(e.state.foldGutter.options.gutter),e.state.foldGutter=null,e.off("gutterClick",a),e.off("changes",s),e.off("viewportChange",c),e.off("fold",f),e.off("unfold",f),e.off("swapDoc",s)),t&&(e.state.foldGutter=new o(function(e){!0===e&&(e={});null==e.gutter&&(e.gutter="CodeMirror-foldgutter");null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open");null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded");return e}(t)),l(e),e.on("gutterClick",a),e.on("changes",s),e.on("viewportChange",c),e.on("fold",f),e.on("unfold",f),e.on("swapDoc",s))});var d=r.Pos;function o(e){this.options=e,this.from=this.to=0}function h(e,t){for(var n=e.findMarks(d(t,0),d(t+1,0)),r=0;r<n.length;++r)if(n[r].__isFold){var o=n[r].find(-1);if(o&&o.line===t)return n[r]}}function p(e){if("string"!=typeof e)return e.cloneNode(!0);var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}function i(i,e,t){var l=i.state.foldGutter.options,a=e-1,s=i.foldOption(l,"minFoldSize"),c=i.foldOption(l,"rangeFinder"),f="string"==typeof l.indicatorFolded&&n(l.indicatorFolded),u="string"==typeof l.indicatorOpen&&n(l.indicatorOpen);i.eachLine(e,t,function(e){++a;var t=null,n=e.gutterMarkers;if(n=n&&n[l.gutter],h(i,a)){if(f&&n&&f.test(n.className))return;t=p(l.indicatorFolded)}else{var r=d(a,0),o=c&&c(i,r);if(o&&o.to.line-o.from.line>=s){if(u&&n&&u.test(n.className))return;t=p(l.indicatorOpen)}}(t||n)&&i.setGutterMarker(e,l.gutter,t)})}function n(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function l(e){var t=e.getViewport(),n=e.state.foldGutter;n&&(e.operation(function(){i(e,t.from,t.to)}),n.from=t.from,n.to=t.to)}function a(e,t,n){var r=e.state.foldGutter;if(r){var o=r.options;if(n==o.gutter){var i=h(e,t);i?i.clear():e.foldCode(d(t,0),o)}}}function s(e){var t=e.state.foldGutter;if(t){var n=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){l(e)},n.foldOnChangeTimeSpan||600)}}function c(t){var n=t.state.foldGutter;if(n){var e=n.options;clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout(function(){var e=t.getViewport();n.from==n.to||20<e.from-n.to||20<n.from-e.to?l(t):t.operation(function(){e.from<n.from&&(i(t,e.from,n.from),n.from=e.from),e.to>n.to&&(i(t,n.to,e.to),n.to=e.to)})},e.updateViewportTimeSpan||400)}}function f(e,t){var n=e.state.foldGutter;if(n){var r=t.line;r>=n.from&&r<n.to&&i(e,r,r+1)}}}),/**** fold/indent-fold.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(a){"use strict";function s(e,t){var n=e.getLine(t),r=n.search(/\S/);return-1==r||/\bcomment\b/.test(e.getTokenTypeAt(a.Pos(t,r+1)))?-1:a.countColumn(n,null,e.getOption("tabSize"))}a.registerHelper("fold","indent",function(e,t){var n=s(e,t.line);if(!(n<0)){for(var r=null,o=t.line+1,i=e.lastLine();o<=i;++o){var l=s(e,o);if(-1==l);else{if(!(n<l))break;r=o}}return r?{from:a.Pos(t.line,e.getLine(t.line).length),to:a.Pos(r,e.getLine(r).length)}:void 0}})}),/**** fold/markdown-fold.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(f){"use strict";f.registerHelper("fold","markdown",function(n,e){function o(e){var t=n.getTokenTypeAt(f.Pos(e,0));return t&&/\bheader\b/.test(t)}function t(e,t,n){var r=t&&t.match(/^#+/);return r&&o(e)?r[0].length:(r=n&&n.match(/^[=\-]+\s*$/))&&o(e+1)?"="==n[0]?1:2:100}var r=n.getLine(e.line),i=n.getLine(e.line+1),l=t(e.line,r,i);if(100!==l){for(var a=n.lastLine(),s=e.line,c=n.getLine(s+2);s<a&&!(t(s+1,i,c)<=l);)++s,i=c,c=n.getLine(s+2);return{from:f.Pos(e.line,r.length),to:f.Pos(s,n.getLine(s).length)}}})}),/**** fold/xml-fold.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var s=e.Pos;function c(e,t){return e.line-t.line||e.ch-t.ch}var t="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=new RegExp("<(/?)(["+t+"][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function f(e,t,n,r){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=r?Math.max(r.from,e.firstLine()):e.firstLine(),this.max=r?Math.min(r.to-1,e.lastLine()):e.lastLine()}function o(e,t){var n=e.cm.getTokenTypeAt(s(e.line,t));return n&&/\btag\b/.test(n)}function i(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function l(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function u(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(i(e))continue;return}if(o(e,t+1)){var n=e.text.lastIndexOf("/",t),r=-1<n&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t+1}}function d(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(l(e))continue;return}if(o(e,t+1)){r.lastIndex=t,e.ch=t;var n=r.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function h(e){for(;;){r.lastIndex=e.ch;var t=r.exec(e.text);if(!t){if(i(e))continue;return}if(o(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}function p(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(l(e))continue;return}if(o(e,t+1)){var n=e.text.lastIndexOf("/",t),r=-1<n&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t}}function m(e,t){for(var n=[];;){var r,o=h(e),i=e.line,l=e.ch-(o?o[0].length:0);if(!o||!(r=u(e)))return;if("selfClose"!=r)if(o[1]){for(var a=n.length-1;0<=a;--a)if(n[a]==o[2]){n.length=a;break}if(a<0&&(!t||t==o[2]))return{tag:o[2],from:s(i,l),to:s(e.line,e.ch)}}else n.push(o[2])}}function g(e,t){for(var n=[];;){var r=p(e);if(!r)return;if("selfClose"!=r){var o=e.line,i=e.ch,l=d(e);if(!l)return;if(l[1])n.push(l[2]);else{for(var a=n.length-1;0<=a;--a)if(n[a]==l[2]){n.length=a;break}if(a<0&&(!t||t==l[2]))return{tag:l[2],from:s(e.line,e.ch),to:s(o,i)}}}else d(e)}}e.registerHelper("fold","xml",function(e,t){for(var n=new f(e,t.line,0);;){var r=h(n);if(!r||n.line!=t.line)return;var o=u(n);if(!o)return;if(!r[1]&&"selfClose"!=o){var i=s(n.line,n.ch),l=m(n,r[2]);return l&&0<c(l.from,i)?{from:i,to:l.from}:null}}}),e.findMatchingTag=function(e,t,n){var r=new f(e,t.line,t.ch,n);if(-1!=r.text.indexOf(">")||-1!=r.text.indexOf("<")){var o=u(r),i=o&&s(r.line,r.ch),l=o&&d(r);if(o&&l&&!(0<c(r,t))){var a={from:s(r.line,r.ch),to:i,tag:l[2]};return"selfClose"==o?{open:a,close:null,at:"open"}:l[1]?{open:g(r,l[2]),close:a,at:"close"}:{open:a,close:m(r=new f(e,i.line,i.ch,n),l[2]),at:"open"}}}},e.findEnclosingTag=function(e,t,n,r){for(var o=new f(e,t.line,t.ch,n);;){var i=g(o,r);if(!i)break;var l=m(new f(e,t.line,t.ch,n),i.tag);if(l)return{open:i,close:l}}},e.scanForClosingTag=function(e,t,n,r){return m(new f(e,t.line,t.ch,r?{from:0,to:r}:null),n)}}),/**** hint/anyword-hint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(v){"use strict";var y=/[\w$]+/;v.registerHelper("hint","anyword",function(e,t){for(var n=t&&t.word||y,r=t&&t.range||500,o=e.getCursor(),i=e.getLine(o.line),l=o.ch,a=l;a&&n.test(i.charAt(a-1));)--a;for(var s=a!=l&&i.slice(a,l),c=t&&t.list||[],f={},u=new RegExp(n.source,"g"),d=-1;d<=1;d+=2)for(var h=o.line,p=Math.min(Math.max(h+d*r,e.firstLine()),e.lastLine())+d;h!=p;h+=d)for(var m,g=e.getLine(h);m=u.exec(g);)h==o.line&&m[0]===s||s&&0!=m[0].lastIndexOf(s,0)||Object.prototype.hasOwnProperty.call(f,m[0])||(f[m[0]]=!0,c.push(m[0]));return{list:c,from:v.Pos(o.line,a),to:v.Pos(o.line,l)}})}),/**** hint/css-hint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../../mode/css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../../mode/css/css"],e):e(CodeMirror)}(function(u){"use strict";var d={link:1,visited:1,active:1,hover:1,focus:1,"first-letter":1,"first-line":1,"first-child":1,before:1,after:1,lang:1};u.registerHelper("hint","css",function(e){var t=e.getCursor(),n=e.getTokenAt(t),r=u.innerMode(e.getMode(),n.state);if("css"==r.mode.name){if("keyword"==n.type&&0=="!important".indexOf(n.string))return{list:["!important"],from:u.Pos(t.line,n.start),to:u.Pos(t.line,n.end)};var o=n.start,i=t.ch,l=n.string.slice(0,i-o);/[^\w$_-]/.test(l)&&(l="",o=i=t.ch);var a=u.resolveMode("text/css"),s=[],c=r.state.state;return"pseudo"==c||"variable-3"==n.type?f(d):"block"==c||"maybeprop"==c?f(a.propertyKeywords):"prop"==c||"parens"==c||"at"==c||"params"==c?(f(a.valueKeywords),f(a.colorKeywords)):"media"!=c&&"media_parens"!=c||(f(a.mediaTypes),f(a.mediaFeatures)),s.length?{list:s,from:u.Pos(t.line,o),to:u.Pos(t.line,i)}:void 0}function f(e){for(var t in e)l&&0!=t.lastIndexOf(l,0)||s.push(t)}})}),/**** hint/html-hint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./xml-hint")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./xml-hint"],e):e(CodeMirror)}(function(o){"use strict";var e="ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "),t=["_blank","_self","_top","_parent"],n=["ascii","utf-8","utf-16","latin1","latin1"],r=["get","post","put","delete"],i=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],l=["all","screen","print","embossed","braille","handheld","print","projection","screen","tty","tv","speech","3d-glasses","resolution [>][<][=] [X]","device-aspect-ratio: X/Y","orientation:portrait","orientation:landscape","device-height: [X]","device-width: [X]"],a={attrs:{}},s={a:{attrs:{href:null,ping:null,type:null,media:l,target:t,hreflang:e}},abbr:a,acronym:a,address:a,applet:a,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:l,hreflang:e,type:null,shape:["default","rect","circle","poly"]}},article:a,aside:a,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["","autoplay"],loop:["","loop"],controls:["","controls"]}},b:a,base:{attrs:{href:null,target:t}},basefont:a,bdi:a,bdo:a,big:a,blockquote:{attrs:{cite:null}},body:a,br:a,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["","autofocus"],disabled:["","autofocus"],formenctype:i,formmethod:r,formnovalidate:["","novalidate"],formtarget:t,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:a,center:a,cite:a,code:a,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["","disabled"],checked:["","checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["","disabled"],multiple:["","multiple"]}},datalist:{attrs:{data:null}},dd:a,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["","open"]}},dfn:a,dir:a,div:a,dl:a,dt:a,em:a,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["","disabled"],form:null,name:null}},figcaption:a,figure:a,font:a,footer:a,form:{attrs:{action:null,name:null,"accept-charset":n,autocomplete:["on","off"],enctype:i,method:r,novalidate:["","novalidate"],target:t}},frame:a,frameset:a,h1:a,h2:a,h3:a,h4:a,h5:a,h6:a,head:{attrs:{},children:["title","base","link","style","meta","script","noscript","command"]},header:a,hgroup:a,hr:a,html:{attrs:{manifest:null},children:["head","body"]},i:a,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["","seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["","autofocus"],checked:["","checked"],disabled:["","disabled"],formenctype:i,formmethod:r,formnovalidate:["","novalidate"],formtarget:t,multiple:["","multiple"],readonly:["","readonly"],required:["","required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:a,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["","autofocus"],disabled:["","disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:a,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:e,media:l,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:a,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:n,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:a,noframes:a,noscript:a,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["","typemustmatch"]}},ol:{attrs:{reversed:["","reversed"],start:null,type:["1","a","A","i","I"]}},optgroup:{attrs:{disabled:["","disabled"],label:null}},option:{attrs:{disabled:["","disabled"],label:null,selected:["","selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:a,param:{attrs:{name:null,value:null}},pre:a,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:a,rt:a,ruby:a,s:a,samp:a,script:{attrs:{type:["text/javascript"],src:null,async:["","async"],defer:["","defer"],charset:n}},section:a,select:{attrs:{form:null,name:null,size:null,autofocus:["","autofocus"],disabled:["","disabled"],multiple:["","multiple"]}},small:a,source:{attrs:{src:null,type:null,media:null}},span:a,strike:a,strong:a,style:{attrs:{type:["text/css"],media:l,scoped:null}},sub:a,summary:a,sup:a,table:a,tbody:a,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["","autofocus"],disabled:["","disabled"],readonly:["","readonly"],required:["","required"],wrap:["soft","hard"]}},tfoot:a,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:a,time:{attrs:{datetime:null}},title:a,tr:a,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:e}},tt:a,u:a,ul:a,var:a,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["","autoplay"],mediagroup:["movie"],muted:["","muted"],controls:["","controls"]}},wbr:a},c={accesskey:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],class:null,contenteditable:["true","false"],contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["en","es"],spellcheck:["true","false"],autocorrect:["true","false"],autocapitalize:["true","false"],style:null,tabindex:["1","2","3","4","5","6","7","8","9"],title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"]};function f(e){for(var t in c)c.hasOwnProperty(t)&&(e.attrs[t]=c[t])}for(var u in f(a),s)s.hasOwnProperty(u)&&s[u]!=a&&f(s[u]);o.htmlSchema=s,o.registerHelper("hint","html",function(e,t){var n={schemaInfo:s};if(t)for(var r in t)n[r]=t[r];return o.hint.xml(e,n)})}),/**** hint/javascript-hint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(c){var f=c.Pos;function d(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n])}function n(e,t,n,r){var o=e.getCursor(),i=n(e,o);if(!/\b(?:string|comment)\b/.test(i.type)){var l=c.innerMode(e.getMode(),i.state);if("json"!==l.mode.helperType){i.state=l.state,/^[\w$_]*$/.test(i.string)?i.end>o.ch&&(i.end=o.ch,i.string=i.string.slice(0,o.ch-i.start)):i={start:o.ch,end:o.ch,string:"",state:i.state,type:"."==i.string?"property":null};for(var a=i;"property"==a.type;){if("."!=(a=n(e,f(o.line,a.start))).string)return;if(a=n(e,f(o.line,a.start)),!s)var s=[];s.push(a)}return{list:function(e,t,n,r){var o=[],i=e.string,l=r&&r.globalScope||window;function a(e){0!=e.lastIndexOf(i,0)||function(e,t){if(Array.prototype.indexOf)return-1!=e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}(o,e)||o.push(e)}function s(e){"string"==typeof e?d(h,a):e instanceof Array?d(p,a):e instanceof Function&&d(m,a),function(e,t){if(Object.getOwnPropertyNames&&Object.getPrototypeOf)for(var n=e;n;n=Object.getPrototypeOf(n))Object.getOwnPropertyNames(n).forEach(t);else for(var r in e)t(r)}(e,a)}if(t&&t.length){var c,f=t.pop();for(f.type&&0===f.type.indexOf("variable")?(r&&r.additionalContext&&(c=r.additionalContext[f.string]),r&&!1===r.useGlobalScope||(c=c||l[f.string])):"string"==f.type?c="":"atom"==f.type?c=1:"function"==f.type&&(null==l.jQuery||"$"!=f.string&&"jQuery"!=f.string||"function"!=typeof l.jQuery?null!=l._&&"_"==f.string&&"function"==typeof l._&&(c=l._()):c=l.jQuery());null!=c&&t.length;)c=c[t.pop().string];null!=c&&s(c)}else{for(var u=e.state.localVars;u;u=u.next)a(u.name);for(u=e.state.globalVars;u;u=u.next)a(u.name);r&&!1===r.useGlobalScope||s(l),d(n,a)}return o}(i,s,t,r),from:f(o.line,i.start),to:f(o.line,i.end)}}}}function r(e,t){var n=e.getTokenAt(t);return t.ch==n.start+1&&"."==n.string.charAt(0)?(n.end=n.start,n.string=".",n.type="property"):/^\.[\w$_]*$/.test(n.string)&&(n.type="property",n.start++,n.string=n.string.replace(/\./,"")),n}c.registerHelper("hint","javascript",function(e,t){return n(e,o,function(e,t){return e.getTokenAt(t)},t)}),c.registerHelper("hint","coffeescript",function(e,t){return n(e,i,r,t)});var h="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),p="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),m="prototype apply call bind".split(" "),o="break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),i="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ")}),/**** hint/show-hint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(H){"use strict";var N="CodeMirror-hint-active";function o(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}H.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var r={hint:t};if(n)for(var o in n)r[o]=n[o];return e.showHint(r)},H.defineExtension("showHint",function(e){e=function(e,t,n){var r=e.options.hintOptions,o={};for(var i in s)o[i]=s[i];if(r)for(var i in r)void 0!==r[i]&&(o[i]=r[i]);if(n)for(var i in n)void 0!==n[i]&&(o[i]=n[i]);o.hint.resolve&&(o.hint=o.hint.resolve(e,t));return o}(this,this.getCursor("start"),e);var t=this.listSelections();if(!(1<t.length)){if(this.somethingSelected()){if(!e.hint.supportsSelection)return;for(var n=0;n<t.length;n++)if(t[n].head.line!=t[n].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var r=this.state.completionActive=new o(this,e);r.options.hint&&(H.signal(this,"startCompletion",this),r.update(!0))}}),H.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});var r=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},i=window.cancelAnimationFrame||clearTimeout;function q(e){return"string"==typeof e?e:e.text}function D(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function l(o,e){this.completion=o,this.data=e,this.picked=!1;var n=this,i=o.cm,l=i.getInputField().ownerDocument,a=l.defaultView||l.parentWindow,s=this.hints=l.createElement("ul"),t=o.cm.options.theme;s.className="CodeMirror-hints "+t,this.selectedHint=e.selectedHint||0;for(var r=e.list,c=0;c<r.length;++c){var f=s.appendChild(l.createElement("li")),u=r[c],d="CodeMirror-hint"+(c!=this.selectedHint?"":" "+N);null!=u.className&&(d=u.className+" "+d),f.className=d,u.render?u.render(f,e,u):f.appendChild(l.createTextNode(u.displayText||q(u))),f.hintId=c}var h=o.options.container||l.body,p=i.cursorCoords(o.options.alignWithWord?e.from:null),m=p.left,g=p.bottom,v=!0,y=0,b=0;if(h!==l.body){var C=-1!==["absolute","relative","fixed"].indexOf(a.getComputedStyle(h).position)?h:h.offsetParent,x=C.getBoundingClientRect(),w=l.body.getBoundingClientRect();y=x.left-w.left-C.scrollLeft,b=x.top-w.top-C.scrollTop}s.style.left=m-y+"px",s.style.top=g-b+"px";var k=a.innerWidth||Math.max(l.body.offsetWidth,l.documentElement.offsetWidth),S=a.innerHeight||Math.max(l.body.offsetHeight,l.documentElement.offsetHeight);h.appendChild(s);var M=s.getBoundingClientRect(),T=M.bottom-S,L=s.scrollHeight>s.clientHeight+1,O=i.getScrollInfo();if(0<T){var A=M.bottom-M.top;if(0<p.top-(p.bottom-M.top)-A)s.style.top=(g=p.top-A-b)+"px",v=!1;else if(S<A){s.style.height=S-5+"px",s.style.top=(g=p.bottom-M.top-b)+"px";var P=i.getCursor();e.from.ch!=P.ch&&(p=i.cursorCoords(P),s.style.left=(m=p.left-y)+"px",M=s.getBoundingClientRect())}}var j,E=M.right-k;if(0<E&&(M.right-M.left>k&&(s.style.width=k-5+"px",E-=M.right-M.left-k),s.style.left=(m=p.left-E-y)+"px"),L)for(var F=s.firstChild;F;F=F.nextSibling)F.style.paddingRight=i.display.nativeBarWidth+"px";i.addKeyMap(this.keyMap=function(e,r){var o={Up:function(){r.moveFocus(-1)},Down:function(){r.moveFocus(1)},PageUp:function(){r.moveFocus(1-r.menuSize(),!0)},PageDown:function(){r.moveFocus(r.menuSize()-1,!0)},Home:function(){r.setFocus(0)},End:function(){r.setFocus(r.length-1)},Enter:r.pick,Tab:r.pick,Esc:r.close};/Mac/.test(navigator.platform)&&(o["Ctrl-P"]=function(){r.moveFocus(-1)},o["Ctrl-N"]=function(){r.moveFocus(1)});var t=e.options.customKeys,i=t?{}:o;function n(e,t){var n;n="string"!=typeof t?function(e){return t(e,r)}:o.hasOwnProperty(t)?o[t]:t,i[e]=n}if(t)for(var l in t)t.hasOwnProperty(l)&&n(l,t[l]);var a=e.options.extraKeys;if(a)for(var l in a)a.hasOwnProperty(l)&&n(l,a[l]);return i}(o,{moveFocus:function(e,t){n.changeActive(n.selectedHint+e,t)},setFocus:function(e){n.changeActive(e)},menuSize:function(){return n.screenAmount()},length:r.length,close:function(){o.close()},pick:function(){n.pick()},data:e})),o.options.closeOnUnfocus&&(i.on("blur",this.onBlur=function(){j=setTimeout(function(){o.close()},100)}),i.on("focus",this.onFocus=function(){clearTimeout(j)}));return i.on("scroll",this.onScroll=function(){var e=i.getScrollInfo(),t=i.getWrapperElement().getBoundingClientRect(),n=g+O.top-e.top,r=n-(a.pageYOffset||(l.documentElement||l.body).scrollTop);if(v||(r+=s.offsetHeight),r<=t.top||r>=t.bottom)return o.close();s.style.top=n+"px",s.style.left=m+O.left-e.left+"px"}),H.on(s,"dblclick",function(e){var t=D(s,e.target||e.srcElement);t&&null!=t.hintId&&(n.changeActive(t.hintId),n.pick())}),H.on(s,"click",function(e){var t=D(s,e.target||e.srcElement);t&&null!=t.hintId&&(n.changeActive(t.hintId),o.options.completeOnSingleClick&&n.pick())}),H.on(s,"mousedown",function(){setTimeout(function(){i.focus()},20)}),H.signal(e,"select",r[this.selectedHint],s.childNodes[this.selectedHint]),!0}function a(e,t,n,r){if(e.async)e(t,r,n);else{var o=e(t,n);o&&o.then?o.then(r):r(o)}}o.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&H.signal(this.data,"close"),this.widget&&this.widget.close(),H.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(e,t){var n=e.list[t];n.hint?n.hint(this.cm,e,n):this.cm.replaceRange(q(n),n.from||e.from,n.to||e.to,"complete"),H.signal(e,"pick",n),this.close()},cursorActivity:function(){this.debounce&&(i(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||!e.ch||this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var n=this;this.debounce=r(function(){n.update()}),this.widget&&this.widget.disable()}},update:function(t){if(null!=this.tick){var n=this,r=++this.tick;a(this.options.hint,this.cm,this.options,function(e){n.tick==r&&n.finishUpdate(e,t)})}},finishUpdate:function(e,t){this.data&&H.signal(this.data,"update");var n=this.widget&&this.widget.picked||t&&this.options.completeSingle;this.widget&&this.widget.close(),(this.data=e)&&e.list.length&&(n&&1==e.list.length?this.pick(e,0):(this.widget=new l(this,e),H.signal(e,"shown")))}},l.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(e,t){if(e>=this.data.list.length?e=t?this.data.list.length-1:0:e<0&&(e=t?0:this.data.list.length-1),this.selectedHint!=e){var n=this.hints.childNodes[this.selectedHint];n&&(n.className=n.className.replace(" "+N,"")),(n=this.hints.childNodes[this.selectedHint=e]).className+=" "+N,n.offsetTop<this.hints.scrollTop?this.hints.scrollTop=n.offsetTop-3:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3),H.signal(this.data,"select",this.data.list[this.selectedHint],n)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},H.registerHelper("hint","auto",{resolve:function(e,t){var n,l=e.getHelpers(t,"hint");if(l.length){var r=function(e,r,o){var i=function(e,t){if(!e.somethingSelected())return t;for(var n=[],r=0;r<t.length;r++)t[r].supportsSelection&&n.push(t[r]);return n}(e,l);!function t(n){if(n==i.length)return r(null);a(i[n],e,o,function(e){e&&0<e.list.length?r(e):t(n+1)})}(0)};return r.async=!0,r.supportsSelection=!0,r}return(n=e.getHelper(e.getCursor(),"hintWords"))?function(e){return H.hint.fromList(e,{words:n})}:H.hint.anyword?function(e,t){return H.hint.anyword(e,t)}:function(){}}}),H.registerHelper("hint","fromList",function(e,t){var n,r=e.getCursor(),o=e.getTokenAt(r),i=H.Pos(r.line,o.start),l=r;o.start<r.ch&&/\w/.test(o.string.charAt(r.ch-o.start-1))?n=o.string.substr(0,r.ch-o.start):(n="",i=r);for(var a=[],s=0;s<t.words.length;s++){var c=t.words[s];c.slice(0,n.length)==n&&a.push(c)}if(a.length)return{list:a,from:i,to:l}}),H.commands.autocomplete=H.showHint;var s={hint:H.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};H.defineOption("hintOptions",null)}),/**** hint/sql-hint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../../mode/sql/sql")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../../mode/sql/sql"],e):e(CodeMirror)}(function(u){"use strict";var p,m,d,g,v={QUERY_DIV:";",ALIAS_KEYWORD:"AS"},y=u.Pos,b=u.cmpPos;function h(e){return"[object Array]"==Object.prototype.toString.call(e)}function C(e){return"string"==typeof e?e:e.text}function x(e,t){return h(t)&&(t={columns:t}),t.text||(t.text=e),t}function w(e){return p[e.toUpperCase()]}function k(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function a(e,t){var n=e.length,r=C(t).substr(0,n);return e.toUpperCase()===r.toUpperCase()}function S(e,t,n,r){if(h(n))for(var o=0;o<n.length;o++)a(t,n[o])&&e.push(r(n[o]));else for(var i in n)if(n.hasOwnProperty(i)){var l=n[i];a(t,l=l&&!0!==l?l.displayText?{text:l.text,displayText:l.displayText}:l.text:i)&&e.push(r(l))}}function M(e){"."==e.charAt(0)&&(e=e.substr(1));for(var t=e.split(g+g),n=0;n<t.length;n++)t[n]=t[n].replace(new RegExp(g,"g"),"");return t.join(g)}function T(e){for(var t=C(e).split("."),n=0;n<t.length;n++)t[n]=g+t[n].replace(new RegExp(g,"g"),g+g)+g;var r=t.join(".");return"string"==typeof e?r:((e=k(e)).text=r,e)}function L(e,t){for(var n=e.split(/\s+/),r=0;r<n.length;r++)n[r]&&t(n[r].replace(/[,;]/g,""))}function O(e,t){for(var n=t.doc,r=n.getValue(),o=e.toUpperCase(),i="",l="",a=[],s={start:y(0,0),end:y(t.lastLine(),t.getLineHandle(t.lastLine()).length)},c=r.indexOf(v.QUERY_DIV);-1!=c;)a.push(n.posFromIndex(c)),c=r.indexOf(v.QUERY_DIV,c+1);a.unshift(y(0,0)),a.push(y(t.lastLine(),t.getLineHandle(t.lastLine()).text.length));for(var f=null,u=t.getCursor(),d=0;d<a.length;d++){if((null==f||0<b(u,f))&&b(u,a[d])<=0){s={start:f,end:a[d]};break}f=a[d]}if(s.start){var h=n.getRange(s.start,s.end,!1);for(d=0;d<h.length;d++){if(L(h[d],function(e){var t=e.toUpperCase();t===o&&w(i)&&(l=i),t!==v.ALIAS_KEYWORD&&(i=e)}),l)break}}return l}u.registerHelper("hint","sql",function(e,t){p=function(e){var t={};if(h(e))for(var n=e.length-1;0<=n;n--){var r=e[n];t[C(r).toUpperCase()]=x(C(r),r)}else if(e)for(var o in e)t[o.toUpperCase()]=x(o,e[o]);return t}(t&&t.tables);var n=t&&t.defaultTable,r=t&&t.disableKeywords;m=n&&w(n),d=function(e){var t=e.doc.modeOption;return"sql"===t&&(t="text/x-sql"),u.resolveMode(t).keywords}(e),g=function(e){var t=e.doc.modeOption;return"sql"===t&&(t="text/x-sql"),u.resolveMode(t).identifierQuote||"`"}(e),n&&!m&&(m=O(n,e)),(m=m||[]).columns&&(m=m.columns);var o,i,l,a=e.getCursor(),s=[],c=e.getTokenAt(a);if(c.end>a.ch&&(c.end=a.ch,c.string=c.string.slice(0,a.ch-c.start)),c.string.match(/^[.`"\w@]\w*$/)?(l=c.string,o=c.start,i=c.end):(o=i=a.ch,l=""),"."==l.charAt(0)||l.charAt(0)==g)o=function(e,t,n,r){for(var o=!1,i=[],l=t.start,a=!0;a;)a="."==t.string.charAt(0),o=o||t.string.charAt(0)==g,l=t.start,i.unshift(M(t.string)),"."==(t=r.getTokenAt(y(e.line,t.start))).string&&(a=!0,t=r.getTokenAt(y(e.line,t.start)));var s=i.join(".");S(n,s,p,function(e){return o?T(e):e}),S(n,s,m,function(e){return o?T(e):e}),s=i.pop();var c=i.join("."),f=!1,u=c;if(!w(c)){var d=c;(c=O(c,r))!==d&&(f=!0)}var h=w(c);return h&&h.columns&&(h=h.columns),h&&S(n,s,h,function(e){var t=c;return 1==f&&(t=u),"string"==typeof e?e=t+"."+e:(e=k(e)).text=t+"."+e.text,o?T(e):e}),l}(a,c,s,e);else{var f=function(e,t){return"object"==typeof e?e.className=t:e={text:e,className:t},e};S(s,l,m,function(e){return f(e,"CodeMirror-hint-table CodeMirror-hint-default-table")}),S(s,l,p,function(e){return f(e,"CodeMirror-hint-table")}),r||S(s,l,d,function(e){return f(e.toUpperCase(),"CodeMirror-hint-keyword")})}return{list:s,from:y(a.line,o),to:y(a.line,i)}})}),/**** hint/xml-hint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(E){"use strict";var F=E.Pos;function H(e,t,n){return n?0<=e.indexOf(t):0==e.lastIndexOf(t,0)}E.registerHelper("hint","xml",function(e,t){var n=t&&t.schemaInfo,r=t&&t.quoteChar||'"',o=t&&t.matchInMiddle;if(n){var i=e.getCursor(),l=e.getTokenAt(i);if(l.end>i.ch&&(l.end=i.ch,l.string=l.string.slice(0,i.ch-l.start)),(g=E.innerMode(e.getMode(),l.state)).mode.xmlCurrentTag){var a,s,c=[],f=!1,u=/\btag\b/.test(l.type)&&!/>$/.test(l.string),d=u&&/^\w/.test(l.string);if(d){var h=e.getLine(i.line).slice(Math.max(0,l.start-2),l.start),p=/<\/$/.test(h)?"close":/<$/.test(h)?"open":null;p&&(s=l.start-("close"==p?2:1))}else u&&"<"==l.string?p="open":u&&"</"==l.string&&(p="close");var m=g.mode.xmlCurrentTag(g.state);if(!u&&!m||p){d&&(a=l.string),f=p;var g,v=g.mode.xmlCurrentContext?g.mode.xmlCurrentContext(g.state):[],y=(g=v.length&&v[v.length-1])&&n[g],b=g?y&&y.children:n["!top"];if(b&&"close"!=p)for(var C=0;C<b.length;++C)a&&!H(b[C],a,o)||c.push("<"+b[C]);else if("close"!=p)for(var x in n)!n.hasOwnProperty(x)||"!top"==x||"!attrs"==x||a&&!H(x,a,o)||c.push("<"+x);g&&(!a||"close"==p&&H(g,a,o))&&c.push("</"+g+">")}else{var w=(y=m&&n[m.name])&&y.attrs,k=n["!attrs"];if(!w&&!k)return;if(w){if(k){var S={};for(var M in k)k.hasOwnProperty(M)&&(S[M]=k[M]);for(var M in w)w.hasOwnProperty(M)&&(S[M]=w[M]);w=S}}else w=k;if("string"==l.type||"="==l.string){var T,L=(h=e.getRange(F(i.line,Math.max(0,i.ch-60)),F(i.line,"string"==l.type?l.start:l.end))).match(/([^\s\u00a0=<>\"\']+)=$/);if(!L||!w.hasOwnProperty(L[1])||!(T=w[L[1]]))return;if("function"==typeof T&&(T=T.call(this,e)),"string"==l.type){a=l.string;var O=0;/['"]/.test(l.string.charAt(0))&&(r=l.string.charAt(0),a=l.string.slice(1),O++);var A=l.string.length;if(/['"]/.test(l.string.charAt(A-1))&&(r=l.string.charAt(A-1),a=l.string.substr(O,A-2)),O){var P=e.getLine(i.line);P.length>l.end&&P.charAt(l.end)==r&&l.end++}f=!0}for(C=0;C<T.length;++C)a&&!H(T[C],a,o)||c.push(r+T[C]+r)}else for(var j in"attribute"==l.type&&(a=l.string,f=!0),w)!w.hasOwnProperty(j)||a&&!H(j,a,o)||c.push(j)}return{list:c,from:f?F(i.line,null==s?l.start:s):i,to:f?F(i.line,l.end):i}}}})}),/**** lint/coffeescript-lint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(l){"use strict";l.registerHelper("lint","coffeescript",function(e){var t=[];if(!window.coffeelint)return window.console&&window.console.error("Error: window.coffeelint not defined, CodeMirror CoffeeScript linting cannot run."),t;var n,r;try{for(var o=coffeelint.lint(e),i=0;i<o.length;i++)n=o[i],void 0,r=n.lineNumber,t.push({from:l.Pos(r-1,0),to:l.Pos(r,0),severity:n.level,message:n.message})}catch(e){t.push({from:l.Pos(e.location.first_line,0),to:l.Pos(e.location.last_line,e.location.last_column),severity:"error",message:e.message})}return t})}),/**** lint/css-lint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(f){"use strict";f.registerHelper("lint","css",function(e,t){var n=[];if(!window.CSSLint)return window.console&&window.console.error("Error: window.CSSLint not defined, CodeMirror CSS linting cannot run."),n;for(var r=CSSLint.verify(e,t).messages,o=null,i=0;i<r.length;i++){var l=(o=r[i]).line-1,a=o.line-1,s=o.col-1,c=o.col;n.push({from:f.Pos(l,s),to:f.Pos(a,c),message:o.message,severity:o.type})}return n})}),/**** lint/html-lint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("htmlhint")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","htmlhint"],e):e(CodeMirror,window.HTMLHint)}(function(f,u){"use strict";var d={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0};f.registerHelper("lint","html",function(e,t){var n=[];if(u&&!u.verify&&(u=void 0!==u.default?u.default:u.HTMLHint),!(u=u||window.HTMLHint))return window.console&&window.console.error("Error: HTMLHint not found, not defined on window, or not available through define/require, CodeMirror HTML linting cannot run."),n;for(var r=u.verify(e,t&&t.rules||d),o=0;o<r.length;o++){var i=r[o],l=i.line-1,a=i.line-1,s=i.col-1,c=i.col;n.push({from:f.Pos(l,s),to:f.Pos(a,c),message:i.message,severity:i.type})}return n})}),/**** lint/javascript-lint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(s){"use strict";s.registerHelper("lint","javascript",function(e,t){if(!window.JSHINT)return window.console&&window.console.error("Error: window.JSHINT not defined, CodeMirror JavaScript linting cannot run."),[];t.indent||(t.indent=1),JSHINT(e,t,t.globals);var n=JSHINT.data().errors,r=[];return n&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r){if(r.line<=0){window.console&&window.console.warn("Cannot display JSHint error (invalid line "+r.line+")",r);continue}var o=r.character-1,i=1+o;if(r.evidence){var l=r.evidence.substring(o).search(/.\b/);-1<l&&(i+=l)}var a={message:r.reason,severity:r.code&&r.code.startsWith("W")?"warning":"error",from:s.Pos(r.line-1,o),to:s.Pos(r.line-1,i)};t.push(a)}}}(n,r),r})}),/**** lint/json-lint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";o.registerHelper("lint","json",function(e){var r=[];if(!window.jsonlint)return window.console&&window.console.error("Error: window.jsonlint not defined, CodeMirror JSON linting cannot run."),r;var t=window.jsonlint.parser||window.jsonlint;t.parseError=function(e,t){var n=t.loc;r.push({from:o.Pos(n.first_line-1,n.first_column),to:o.Pos(n.last_line-1,n.last_column),message:e})};try{t.parse(e)}catch(e){}return r})}),/**** lint/lint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(a){"use strict";var p="CodeMirror-lint-markers";function l(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e,t,n){var r=function(e,t){var n=document.createElement("div");function r(e){if(!n.parentNode)return a.off(document,"mousemove",r);n.style.top=Math.max(0,e.clientY-n.offsetHeight-5)+"px",n.style.left=e.clientX+5+"px"}return n.className="CodeMirror-lint-tooltip",n.appendChild(t.cloneNode(!0)),document.body.appendChild(n),a.on(document,"mousemove",r),r(e),null!=n.style.opacity&&(n.style.opacity=1),n}(e,t);function o(){a.off(n,"mouseout",o),r&&(function(e){e.parentNode&&(null==e.style.opacity&&l(e),e.style.opacity=0,setTimeout(function(){l(e)},600))}(r),r=null)}var i=setInterval(function(){if(r)for(var e=n;;e=e.parentNode){if(e&&11==e.nodeType&&(e=e.host),e==document.body)return;if(!e){o();break}}if(!r)return clearInterval(i)},400);a.on(n,"mouseout",o)}function s(t,e,n){this.marked=[],this.options=e,this.timeout=null,this.hasGutter=n,this.onMouseOver=function(e){!function(e,t){var n=t.target||t.srcElement;if(!/\bCodeMirror-lint-mark-/.test(n.className))return;for(var r=n.getBoundingClientRect(),o=(r.left+r.right)/2,i=(r.top+r.bottom)/2,l=e.findMarksAt(e.coordsChar({left:o,top:i},"client")),a=[],s=0;s<l.length;++s){var c=l[s].__annotation;c&&a.push(c)}a.length&&function(e,t){for(var n=t.target||t.srcElement,r=document.createDocumentFragment(),o=0;o<e.length;o++){var i=e[o];r.appendChild(v(i))}f(t,r,n)}(a,t)}(t,e)},this.waitingFor=0}function m(e){var t=e.state.lint;t.hasGutter&&e.clearGutter(p);for(var n=0;n<t.marked.length;++n)t.marked[n].clear();t.marked.length=0}function g(t,e,n,r){var o=document.createElement("div"),i=o;return o.className="CodeMirror-lint-marker-"+e,n&&((i=o.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker-multiple"),0!=r&&a.on(i,"mouseover",function(e){f(e,t,i)}),o}function v(e){var t=e.severity;t=t||"error";var n=document.createElement("div");return n.className="CodeMirror-lint-message-"+t,void 0!==e.messageHTML?n.innerHTML=e.messageHTML:n.appendChild(document.createTextNode(e.message)),n}function c(t){var e=t.state.lint.options,n=e.options||e,r=e.getAnnotations||t.getHelper(a.Pos(0,0),"lint");if(r)if(e.async||r.async)!function(n,e,t){var r=n.state.lint,o=++r.waitingFor;function i(){o=-1,n.off("change",i)}n.on("change",i),e(n.getValue(),function(e,t){n.off("change",i),r.waitingFor==o&&(t&&e instanceof a&&(e=t),n.operation(function(){u(n,e)}))},t,n)}(t,r,n);else{var o=r(t.getValue(),n,t);if(!o)return;o.then?o.then(function(e){t.operation(function(){u(t,e)})}):t.operation(function(){u(t,o)})}}function u(e,t){m(e);for(var n,r,o=e.state.lint,i=o.options,l=function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],o=r.from.line;(t[o]||(t[o]=[])).push(r)}return t}(t),a=0;a<l.length;++a){var s=l[a];if(s){for(var c=null,f=o.hasGutter&&document.createDocumentFragment(),u=0;u<s.length;++u){var d=s[u],h=d.severity;r=h=h||"error",c="error"==(n=c)?n:r,i.formatAnnotation&&(d=i.formatAnnotation(d)),o.hasGutter&&f.appendChild(v(d)),d.to&&o.marked.push(e.markText(d.from,d.to,{className:"CodeMirror-lint-mark-"+h,__annotation:d}))}o.hasGutter&&e.setGutterMarker(a,p,g(f,c,1<s.length,o.options.tooltips))}}i.onUpdateLinting&&i.onUpdateLinting(t,l,e)}function d(e){var t=e.state.lint;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){c(e)},t.options.delay||500))}a.defineOption("lint",!1,function(e,t,n){if(n&&n!=a.Init&&(m(e),!1!==e.state.lint.options.lintOnChange&&e.off("change",d),a.off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),clearTimeout(e.state.lint.timeout),delete e.state.lint),t){for(var r=e.getOption("gutters"),o=!1,i=0;i<r.length;++i)r[i]==p&&(o=!0);var l=e.state.lint=new s(e,function(e,t){return t instanceof Function?{getAnnotations:t}:(t&&!0!==t||(t={}),t)}(0,t),o);!1!==l.options.lintOnChange&&e.on("change",d),0!=l.options.tooltips&&"gutter"!=l.options.tooltips&&a.on(e.getWrapperElement(),"mouseover",l.onMouseOver),c(e)}}),a.defineExtension("performLint",function(){this.state.lint&&c(this)})}),/**** lint/yaml-lint.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(i){"use strict";i.registerHelper("lint","yaml",function(e){var t=[];if(!window.jsyaml)return window.console&&window.console.error("Error: window.jsyaml not defined, CodeMirror YAML linting cannot run."),t;try{jsyaml.loadAll(e)}catch(e){var n=e.mark,r=n?i.Pos(n.line,n.column):i.Pos(0,0),o=r;t.push({from:r,to:o,message:e.message})}return t})}),/**** merge/merge.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","diff_match_patch"],e):e(CodeMirror)}(function(v){"use strict";var A=v.Pos,y="http://www.w3.org/2000/svg";function b(e,t){this.mv=e,this.type=t,this.classes="left"==t?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}function f(e){e.diffOutOfDate&&(e.diff=j(e.orig.getValue(),e.edit.getValue(),e.mv.options.ignoreWhitespace),e.chunks=E(e.diff),e.diffOutOfDate=!1,v.signal(e.edit,"updateDiff",e.diff))}var u=!(b.prototype={constructor:b,init:function(e,t,n){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=v(e,z({value:t,readOnly:!this.mv.options.allowEditingOriginals},z(n))),"align"==this.mv.options.connect&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new V(this.edit)),this.orig.state.trackAlignable=new V(this.orig)),this.lockButton.title=this.edit.phrase("Toggle locked scrolling"),this.orig.state.diffViews=[this];var r=n.chunkClassLocation||"background";"[object Array]"!=Object.prototype.toString.call(r)&&(r=[r]),this.classes.classLocation=r,this.diff=j(o(t),o(n.value),this.mv.options.ignoreWhitespace),this.chunks=E(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=!1!==n.showDifferences},registerEvents:function(e){this.forceUpdate=function(n){var t,r={from:0,to:0,marked:[]},o={from:0,to:0,marked:[]},i=!1;function l(e){i=!(u=!0),"full"==e&&(n.svg&&R(n.svg),n.copyButtons&&R(n.copyButtons),h(n.edit,r.marked,n.classes),h(n.orig,o.marked,n.classes),r.from=r.to=o.from=o.to=0),f(n),n.showDifferences&&(p(n.edit,n.diff,r,DIFF_INSERT,n.classes),p(n.orig,n.diff,o,DIFF_DELETE,n.classes)),"align"==n.mv.options.connect&&k(n),x(n),null!=n.needsScrollSync&&d(n,n.needsScrollSync),u=!1}function a(e){u||(n.dealigned=!0,s(e))}function s(e){u||i||(clearTimeout(t),!0===e&&(i=!0),t=setTimeout(l,!0===e?20:250))}function e(e,t){n.diffOutOfDate||(n.diffOutOfDate=!0,r.from=r.to=o.from=o.to=0),a(t.text.length-1!=t.to.line-t.from.line)}function c(){n.diffOutOfDate=!0,n.dealigned=!0,l("full")}n.edit.on("change",e),n.orig.on("change",e),n.edit.on("swapDoc",c),n.orig.on("swapDoc",c),"align"==n.mv.options.connect&&(v.on(n.edit.state.trackAlignable,"realign",a),v.on(n.orig.state.trackAlignable,"realign",a));return n.edit.on("viewportChange",function(){s(!1)}),n.orig.on("viewportChange",function(){s(!1)}),l(),l}(this),i(this,!0,!1),function(e,t){e.edit.on("scroll",function(){d(e,!0)&&x(e)}),e.orig.on("scroll",function(){d(e,!1)&&x(e),t&&d(t,!0)&&x(t)})}(this,e)},setShowDifferences:function(e){(e=!1!==e)!=this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}});function d(e,t){if(e.diffOutOfDate)return e.lockScroll&&null==e.needsScrollSync&&(e.needsScrollSync=t),!1;if(e.needsScrollSync=null,!e.lockScroll)return!0;var n,r,o=+new Date;if(r=t?(n=e.edit,e.orig):(n=e.orig,e.edit),n.state.scrollSetBy==e&&(n.state.scrollSetAt||0)+250>o)return!1;var i=n.getScrollInfo();if("align"==e.mv.options.connect)m=i.top;else{var l,a,s=.5*i.clientHeight,c=i.top+s,f=n.lineAtHeight(c,"local"),u=function(e,t,n){for(var r,o,i,l,a=0;a<e.length;a++){var s=e[a],c=n?s.editFrom:s.origFrom,f=n?s.editTo:s.origTo;null==o&&(t<c?(o=s.editFrom,l=s.origFrom):t<f&&(o=s.editTo,l=s.origTo)),f<=t?(r=s.editTo,i=s.origTo):c<=t&&(r=s.editFrom,i=s.origFrom)}return{edit:{before:r,after:o},orig:{before:i,after:l}}}(e.chunks,f,t),d=C(n,t?u.edit:u.orig),h=C(r,t?u.orig:u.edit),p=(c-d.top)/(d.bot-d.top),m=h.top-s+p*(h.bot-h.top);if(m>i.top&&(a=i.top/s)<1)m=m*a+i.top*(1-a);else if((l=i.height-i.clientHeight-i.top)<s){var g=r.getScrollInfo();l<g.height-g.clientHeight-m&&(a=l/s)<1&&(m=m*a+(g.height-g.clientHeight-l)*(1-a))}}return r.scrollTo(i.left,m),r.state.scrollSetAt=o,r.state.scrollSetBy=e,!0}function C(e,t){var n=t.after;return null==n&&(n=e.lastLine()+1),{top:e.heightAtLine(t.before||0,"local"),bot:e.heightAtLine(n,"local")}}function i(e,t,n){(e.lockScroll=t)&&0!=n&&d(e,DIFF_INSERT)&&x(e),(t?v.addClass:v.rmClass)(e.lockButton,"CodeMirror-merge-scrolllock-enabled")}function l(e,t,n){for(var r=n.classLocation,o=0;o<r.length;o++)e.removeLineClass(t,r[o],n.chunk),e.removeLineClass(t,r[o],n.start),e.removeLineClass(t,r[o],n.end)}function h(e,t,n){for(var r=0;r<t.length;++r){var o=t[r];o instanceof v.TextMarker?o.clear():o.parent&&l(e,o,n)}t.length=0}function p(e,t,n,r,o){var i=e.getViewport();e.operation(function(){n.from==n.to||20<i.from-n.to||20<n.from-i.to?(h(e,n.marked,o),a(e,t,r,n.marked,i.from,i.to,o),n.from=i.from,n.to=i.to):(i.from<n.from&&(a(e,t,r,n.marked,i.from,n.from,o),n.from=i.from),i.to>n.to&&(a(e,t,r,n.marked,n.to,i.to,o),n.to=i.to))})}function P(e,t,n,r,o,i){for(var l=n.classLocation,a=e.getLineHandle(t),s=0;s<l.length;s++)r&&e.addLineClass(a,l[s],n.chunk),o&&e.addLineClass(a,l[s],n.start),i&&e.addLineClass(a,l[s],n.end);return a}function a(i,e,t,l,a,s,c){var n=A(0,0),r=A(a,0),o=i.clipPos(A(s-1)),f=t==DIFF_DELETE?c.del:c.insert;function u(e,t){for(var n=Math.max(a,e),r=Math.min(s,t),o=n;o<r;++o)l.push(P(i,o,c,!0,o==e,o==t-1));e==t&&n==t&&r==t&&(n?l.push(P(i,n-1,c,!1,!1,!0)):l.push(P(i,n,c,!1,!0,!1)))}for(var d,h,p,m,g,v,y=0,b=!1,C=0;C<e.length;++C){var x=e[C],w=x[0],k=x[1];if(w==DIFF_EQUAL){var S=n.line+(H(e,C)?0:1);_(n,k);var M=n.line+(F(e,C)?1:0);S<M&&(b&&(u(y,S),b=!1),y=M)}else if(b=!0,w==t){var T=_(n,k,!0),L=(v=n,0<((g=r).line-v.line||g.ch-v.ch)?g:v),O=(m=T,((p=o).line-m.line||p.ch-m.ch)<0?p:m);h=O,(d=L).line==h.line&&d.ch==h.ch||l.push(i.markText(L,O,{className:f})),n=T}}b&&u(y,n.line+1)}function x(e){if(e.showDifferences){if(e.svg){R(e.svg);var t=e.gap.offsetWidth;B(e.svg,"width",t,"height",e.gap.offsetHeight)}e.copyButtons&&R(e.copyButtons);for(var n=e.edit.getViewport(),r=e.orig.getViewport(),o=e.mv.wrap.getBoundingClientRect().top,i=o-e.edit.getScrollerElement().getBoundingClientRect().top+e.edit.getScrollInfo().top,l=o-e.orig.getScrollerElement().getBoundingClientRect().top+e.orig.getScrollInfo().top,a=0;a<e.chunks.length;a++){var s=e.chunks[a];s.editFrom<=n.to&&s.editTo>=n.from&&s.origFrom<=r.to&&s.origTo>=r.from&&S(e,s,l,i,t)}}}function w(e,t){for(var n=0,r=0,o=0;o<t.length;o++){var i=t[o];if(i.editTo>e&&i.editFrom<=e)return null;if(i.editFrom>e)break;n=i.editTo,r=i.origTo}return r+(e-n)}function c(e,t,n){for(var r=e.state.trackAlignable,o=e.firstLine(),i=0,l=[],a=0;;a++){for(var s=t[a],c=s?n?s.origFrom:s.editFrom:1e9;i<r.alignable.length;i+=2){var f=r.alignable[i]+1;if(!(f<=o)){if(!(f<=c))break;l.push(f)}}if(!s)break;l.push(o=n?s.origTo:s.editTo)}return l}function m(e,t,n,r){var o=0,i=0,l=0,a=0;e:for(;;o++){var s=e[o],c=t[i];if(!s&&null==c)break;for(var f=s?s[0]:1e9,u=null==c?1e9:c;l<n.length;){var d=n[l];if(d.origFrom<=u&&d.origTo>u){i++,o--;continue e}if(d.editTo>f){if(d.editFrom<=f)continue e;break}a+=d.origTo-d.origFrom-(d.editTo-d.editFrom),l++}if(f==u-a)s[r]=u,i++;else if(f<u-a)s[r]=f+a;else{var h=[u-a,null,null];h[r]=u,e.splice(o,0,h),i++}}}function k(e,t){if(e.dealigned||t){if(!e.orig.curOp)return e.orig.operation(function(){k(e,t)});e.dealigned=!1;var n=e.mv.left==e?e.mv.right:e.mv.left;n&&(f(n),n.dealigned=!1);for(var r=function(e,t){var n=c(e.edit,e.chunks,!1),r=[];if(t)for(var o=0,i=0;o<t.chunks.length;o++){for(var l=t.chunks[o].editTo;i<n.length&&n[i]<l;)i++;i!=n.length&&n[i]==l||n.splice(i++,0,l)}for(o=0;o<n.length;o++)r.push([n[o],null,null]);return m(r,c(e.orig,e.chunks,!0),e.chunks,1),t&&m(r,c(t.orig,t.chunks,!0),t.chunks,2),r}(e,n),o=e.mv.aligners,i=0;i<o.length;i++)o[i].clear();o.length=0;var l=[e.edit,e.orig],a=[];n&&l.push(n.orig);for(i=0;i<l.length;i++)a.push(l[i].getScrollInfo().top);for(var s=0;s<r.length;s++)g(l,r[s],o);for(i=0;i<l.length;i++)l[i].scrollTo(null,a[i])}}function g(e,t,n){for(var r=0,o=[],i=0;i<e.length;i++)if(null!=t[i]){var l=e[i].heightAtLine(t[i],"local");o[i]=l,r=Math.max(r,l)}for(i=0;i<e.length;i++)if(null!=t[i]){var a=r-o[i];1<a&&n.push(s(e[i],t[i],a))}}function s(e,t,n){var r=!0;t>e.lastLine()&&(t--,r=!1);var o=document.createElement("div");return o.className="CodeMirror-merge-spacer",o.style.height=n+"px",o.style.minWidth="1px",e.addLineWidget(t,o,{height:n,above:r,mergeSpacer:!0,handleMouseEvents:!0})}function S(e,t,n,r,o){var i="left"==e.type,l=e.orig.heightAtLine(t.origFrom,"local",!0)-n;if(e.svg){var a=l,s=e.edit.heightAtLine(t.editFrom,"local",!0)-r;if(i){var c=a;a=s,s=c}var f=e.orig.heightAtLine(t.origTo,"local",!0)-n,u=e.edit.heightAtLine(t.editTo,"local",!0)-r;if(i){c=f;f=u,u=c}var d=" C "+o/2+" "+s+" "+o/2+" "+a+" "+(o+2)+" "+a,h=" C "+o/2+" "+f+" "+o/2+" "+u+" -1 "+u;B(e.svg.appendChild(document.createElementNS(y,"path")),"d","M -1 "+s+d+" L "+(o+2)+" "+f+h+" z","class",e.classes.connect)}if(e.copyButtons){var p=e.copyButtons.appendChild(I("div","left"==e.type?"⇝":"⇜","CodeMirror-merge-copy")),m=e.mv.options.allowEditingOriginals;if(p.title=e.edit.phrase(m?"Push to left":"Revert chunk"),p.chunk=t,p.style.top=(t.origTo>t.origFrom?l:e.edit.heightAtLine(t.editFrom,"local")-r)+"px",m){var g=e.edit.heightAtLine(t.editFrom,"local")-r,v=e.copyButtons.appendChild(I("div","right"==e.type?"⇝":"⇜","CodeMirror-merge-copy-reverse"));v.title="Push to right",v.chunk={editFrom:t.origFrom,editTo:t.origTo,origFrom:t.editFrom,origTo:t.editTo},v.style.top=g+"px","right"==e.type?v.style.left="2px":v.style.right="2px"}}}function M(e,t,n,r){if(!e.diffOutOfDate){var o=r.origTo>n.lastLine()?A(r.origFrom-1):A(r.origFrom,0),i=A(r.origTo,0),l=r.editTo>t.lastLine()?A(r.editFrom-1):A(r.editFrom,0),a=A(r.editTo,0),s=e.mv.options.revertChunk;s?s(e.mv,n,o,i,t,l,a):t.replaceRange(n.getRange(o,i),l,a)}}var T,L=v.MergeView=function(e,t){if(!(this instanceof L))return new L(e,t);var n=(this.options=t).origLeft,r=null==t.origRight?t.orig:t.origRight,o=null!=n,i=null!=r,l=1+(o?1:0)+(i?1:0),a=[],s=this.left=null,c=this.right=null,f=this;if(o){s=this.left=new b(this,"left");var u=I("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");a.push(u),a.push(O(s))}var d=I("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(a.push(d),i){c=this.right=new b(this,"right"),a.push(O(c));var h=I("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");a.push(h)}(i?h:d).className+=" CodeMirror-merge-pane-rightmost",a.push(I("div",null,null,"height: 0; clear: both;"));var p=this.wrap=e.appendChild(I("div",a,"CodeMirror-merge CodeMirror-merge-"+l+"pane"));this.edit=v(d,z(t)),s&&s.init(u,n,t),c&&c.init(h,r,t),t.collapseIdentical&&this.editor().operation(function(){!function(e,t){"number"!=typeof t&&(t=2);for(var n=[],r=e.editor(),o=r.firstLine(),i=o,l=r.lastLine();i<=l;i++)n.push(!0);e.left&&D(e.left,t,o,n);e.right&&D(e.right,t,o,n);for(var a=0;a<n.length;a++)if(n[a]){for(var s=a+o,c=1;a<n.length-1&&n[a+1];a++,c++);if(t<c){var f=[{line:s,cm:r}];e.left&&f.push({line:w(s,e.left.chunks),cm:e.left.orig}),e.right&&f.push({line:w(s,e.right.chunks),cm:e.right.orig});var u=q(c,f);e.options.onCollapse&&e.options.onCollapse(e,s,c,u)}}}(f,t.collapseIdentical)}),"align"==t.connect&&(this.aligners=[],k(this.left||this.right,!0)),s&&s.registerEvents(c),c&&c.registerEvents(s);function m(){s&&x(s),c&&x(c)}v.on(window,"resize",m);var g=setInterval(function(){for(var e=p.parentNode;e&&e!=document.body;e=e.parentNode);e||(clearInterval(g),v.off(window,"resize",m))},5e3)};function O(n){var e=n.lockButton=I("div",null,"CodeMirror-merge-scrolllock"),t=I("div",[e],"CodeMirror-merge-scrolllock-wrap");v.on(e,"click",function(){i(n,!n.lockScroll)});var r=[t];if(!1!==n.mv.options.revertButtons&&(n.copyButtons=I("div",null,"CodeMirror-merge-copybuttons-"+n.type),v.on(n.copyButtons,"click",function(e){var t=e.target||e.srcElement;t.chunk&&("CodeMirror-merge-copy-reverse"!=t.className?M(n,n.edit,n.orig,t.chunk):M(n,n.orig,n.edit,t.chunk))}),r.unshift(n.copyButtons)),"align"!=n.mv.options.connect){var o=document.createElementNS&&document.createElementNS(y,"svg");o&&!o.createSVGRect&&(o=null),(n.svg=o)&&r.push(o)}return n.gap=I("div",r,"CodeMirror-merge-gap")}function o(e){return"string"==typeof e?e:e.getValue()}function j(e,t,n){for(var r=(T=T||new diff_match_patch).diff_main(e,t),o=0;o<r.length;++o){var i=r[o];(n?/[^ \t]/.test(i[1]):i[1])?o&&r[o-1][0]==i[0]&&(r.splice(o--,1),r[o][1]+=i[1]):r.splice(o--,1)}return r}function E(e){var t=[];if(!e.length)return t;for(var n=0,r=0,o=A(0,0),i=A(0,0),l=0;l<e.length;++l){var a=e[l],s=a[0];if(s==DIFF_EQUAL){var c=!H(e,l)||o.line<n||i.line<r?1:0,f=o.line+c,u=i.line+c;_(o,a[1],null,i);var d=F(e,l)?1:0,h=o.line+d,p=i.line+d;f<h&&(l&&t.push({origFrom:r,origTo:u,editFrom:n,editTo:f}),n=h,r=p)}else _(s==DIFF_INSERT?o:i,a[1])}return(n<=o.line||r<=i.line)&&t.push({origFrom:r,origTo:i.line+1,editFrom:n,editTo:o.line+1}),t}function F(e,t){if(t==e.length-1)return!0;var n=e[t+1][1];return!(1==n.length&&t<e.length-2||10!=n.charCodeAt(0))&&(t==e.length-2||(1<(n=e[t+2][1]).length||t==e.length-3)&&10==n.charCodeAt(0))}function H(e,t){if(0==t)return!0;var n=e[t-1][1];return 10==n.charCodeAt(n.length-1)&&(1==t||10==(n=e[t-2][1]).charCodeAt(n.length-1))}function N(e,t,n){e.addLineClass(t,"wrap","CodeMirror-merge-collapsed-line");var r=document.createElement("span");r.className="CodeMirror-merge-collapsed-widget",r.title=e.phrase("Identical text collapsed. Click to expand.");var o=e.markText(A(t,0),A(n-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:r,clearOnEnter:!0});function i(){o.clear(),e.removeLineClass(t,"wrap","CodeMirror-merge-collapsed-line")}return o.explicitlyCleared&&i(),v.on(r,"click",i),o.on("clear",i),v.on(r,"click",i),{mark:o,clear:i}}function q(e,t){var n=[];function r(){for(var e=0;e<n.length;e++)n[e].clear()}for(var o=0;o<t.length;o++){var i=t[o],l=N(i.cm,i.line,i.line+e);n.push(l),l.mark.on("clear",r)}return n[0].mark}function D(e,t,n,r){for(var o=0;o<e.chunks.length;o++)for(var i=e.chunks[o],l=i.editFrom-t;l<i.editTo+t;l++){var a=l+n;0<=a&&a<r.length&&(r[a]=!1)}}function I(e,t,n,r){var o=document.createElement(e);if(n&&(o.className=n),r&&(o.style.cssText=r),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var i=0;i<t.length;++i)o.appendChild(t[i]);return o}function R(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild)}function B(e){for(var t=1;t<arguments.length;t+=2)e.setAttribute(arguments[t],arguments[t+1])}function z(e,t){for(var n in t=t||{},e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function _(e,t,n,r){for(var o=n?A(e.line,e.ch):e,i=0;;){var l=t.indexOf("\n",i);if(-1==l)break;++o.line,r&&++r.line,i=l+1}return o.ch=(i?0:o.ch)+(t.length-i),r&&(r.ch=(i?0:r.ch)+(t.length-i)),o}L.prototype={constructor:L,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)},rightChunks:function(){if(this.right)return f(this.right),this.right.chunks},leftChunks:function(){if(this.left)return f(this.left),this.left.chunks}};var r=1,W=2,U=4;function V(e){this.cm=e,this.alignable=[],this.height=e.doc.height;var l=this;e.on("markerAdded",function(e,t){if(t.collapsed){var n=t.find(1);null!=n&&l.set(n.line,U)}}),e.on("markerCleared",function(e,t,n,r){null!=r&&t.collapsed&&l.check(r,U,l.hasMarker)}),e.on("markerChanged",this.signal.bind(this)),e.on("lineWidgetAdded",function(e,t,n){t.mergeSpacer||(t.above?l.set(n-1,W):l.set(n,r))}),e.on("lineWidgetCleared",function(e,t,n){t.mergeSpacer||(t.above?l.check(n-1,W,l.hasWidgetBelow):l.check(n,r,l.hasWidget))}),e.on("lineWidgetChanged",this.signal.bind(this)),e.on("change",function(e,t){var n=t.from.line,r=t.to.line-t.from.line,o=t.text.length-1,i=n+o;(r||o)&&l.map(n,r,o),l.check(i,U,l.hasMarker),(r||o)&&l.check(t.from.line,U,l.hasMarker)}),e.on("viewportChange",function(){l.cm.doc.height!=l.height&&l.signal()})}function $(e,t,n){for(var r=e.length-1;0<=r;r--){var o=e[r],i=(n?o.origTo:o.editTo)-1;if(i<t)return i}}function K(e,t,n){for(var r=0;r<e.length;r++){var o=e[r],i=n?o.origFrom:o.editFrom;if(t<i)return i}}function t(e,t){var n=null,r=e.state.diffViews,o=e.getCursor().line;if(r)for(var i=0;i<r.length;i++){var l=r[i],a=e==l.orig;f(l);var s=t<0?$(l.chunks,o,a):K(l.chunks,o,a);null==s||null!=n&&!(t<0?n<s:s<n)||(n=s)}if(null==n)return v.Pass;e.setCursor(n,0)}V.prototype={signal:function(){v.signal(this,"realign"),this.height=this.cm.doc.height},set:function(e,t){for(var n=-1;n<this.alignable.length;n+=2){var r=this.alignable[n]-e;if(0==r){if((this.alignable[n+1]&t)==t)return;return this.alignable[n+1]|=t,void this.signal()}if(0<r)break}this.signal(),this.alignable.splice(n,0,e,t)},find:function(e){for(var t=0;t<this.alignable.length;t+=2)if(this.alignable[t]==e)return t;return-1},check:function(e,t,n){var r=this.find(e);if(-1!=r&&this.alignable[r+1]&t&&!n.call(this,e)){this.signal();var o=this.alignable[r+1]&~t;o?this.alignable[r+1]=o:this.alignable.splice(r,2)}},hasMarker:function(e){var t=this.cm.getLineHandle(e);if(t.markedSpans)for(var n=0;n<t.markedSpans.length;n++)if(t.markedSpans[n].marker.collapsed&&null!=t.markedSpans[n].to)return!0;return!1},hasWidget:function(e){var t=this.cm.getLineHandle(e);if(t.widgets)for(var n=0;n<t.widgets.length;n++)if(!t.widgets[n].above&&!t.widgets[n].mergeSpacer)return!0;return!1},hasWidgetBelow:function(e){if(e==this.cm.lastLine())return!1;var t=this.cm.getLineHandle(e+1);if(t.widgets)for(var n=0;n<t.widgets.length;n++)if(t.widgets[n].above&&!t.widgets[n].mergeSpacer)return!0;return!1},map:function(e,t,n){for(var r=n-t,o=e+t,i=-1,l=-1,a=0;a<this.alignable.length;a+=2){var s=this.alignable[a];s==e&&this.alignable[a+1]&W&&(i=a),s==o&&this.alignable[a+1]&W&&(l=a),s<=e||(s<o?this.alignable.splice(a--,2):this.alignable[a]+=r)}if(-1<i){var c=this.alignable[i+1];c==W?this.alignable.splice(i,2):this.alignable[i+1]=c&~W}-1<l&&n&&this.set(e+n,W)}},v.commands.goNextDiff=function(e){return t(e,1)},v.commands.goPrevDiff=function(e){return t(e,-1)}}),/**** mode/loadmode.js ****/
function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),"cjs"):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],function(e){t(e,"amd")}):t(CodeMirror,"plain")}(function(l,a){l.modeURL||(l.modeURL="../mode/%N/%N.js");var s={};function c(e,t){var n=l.modes[e].dependencies;if(!n)return t();for(var r=[],o=0;o<n.length;++o)l.modes.hasOwnProperty(n[o])||r.push(n[o]);if(!r.length)return t();var i=function(e,t){var n=t;return function(){0==--n&&e()}}(t,r.length);for(o=0;o<r.length;++o)l.requireMode(r[o],i)}l.requireMode=function(e,t){if("string"!=typeof e&&(e=e.name),l.modes.hasOwnProperty(e))return c(e,t);if(s.hasOwnProperty(e))return s[e].push(t);var n=l.modeURL.replace(/%N/g,e);if("plain"==a){var r=document.createElement("script");r.src=n;var o=document.getElementsByTagName("script")[0],i=s[e]=[t];l.on(r,"load",function(){c(e,function(){for(var e=0;e<i.length;++e)i[e]()})}),o.parentNode.insertBefore(r,o)}else"cjs"==a?(require(n),t()):"amd"==a&&requirejs([n],t)},l.autoLoadMode=function(e,t){l.modes.hasOwnProperty(t)||l.requireMode(t,function(){e.setOption("mode",e.getOption("mode"))})}}),/**** mode/multiplex.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(m){"use strict";m.multiplexingMode=function(d){var h=Array.prototype.slice.call(arguments,1);function p(e,t,n,r){if("string"==typeof t){var o=e.indexOf(t,n);return r&&-1<o?o+t.length:o}var i=t.exec(n?e.slice(n):e);return i?i.index+n+(r?i[0].length:0):-1}return{startState:function(){return{outer:m.startState(d),innerActive:null,inner:null}},copyState:function(e){return{outer:m.copyState(d,e.outer),innerActive:e.innerActive,inner:e.innerActive&&m.copyState(e.innerActive.mode,e.inner)}},token:function(e,t){if(t.innerActive){var n=t.innerActive;i=e.string;if(!n.close&&e.sol())return t.innerActive=t.inner=null,this.token(e,t);if((a=n.close?p(i,n.close,e.pos,n.parseDelimiters):-1)==e.pos&&!n.parseDelimiters)return e.match(n.close),t.innerActive=t.inner=null,n.delimStyle&&n.delimStyle+" "+n.delimStyle+"-close";-1<a&&(e.string=i.slice(0,a));var r=n.mode.token(e,t.inner);return-1<a&&(e.string=i),a==e.pos&&n.parseDelimiters&&(t.innerActive=t.inner=null),n.innerStyle&&(r=r?r+" "+n.innerStyle:n.innerStyle),r}for(var o=1/0,i=e.string,l=0;l<h.length;++l){var a,s=h[l];if((a=p(i,s.open,e.pos))==e.pos){s.parseDelimiters||e.match(s.open),t.innerActive=s;var c=0;if(d.indent){var f=d.indent(t.outer,"","");f!==m.Pass&&(c=f)}return t.inner=m.startState(s.mode,c),s.delimStyle&&s.delimStyle+" "+s.delimStyle+"-open"}-1!=a&&a<o&&(o=a)}o!=1/0&&(e.string=i.slice(0,o));var u=d.token(e,t.outer);return o!=1/0&&(e.string=i),u},indent:function(e,t,n){var r=e.innerActive?e.innerActive.mode:d;return r.indent?r.indent(e.innerActive?e.inner:e.outer,t,n):m.Pass},blankLine:function(e){var t=e.innerActive?e.innerActive.mode:d;if(t.blankLine&&t.blankLine(e.innerActive?e.inner:e.outer),e.innerActive)"\n"===e.innerActive.close&&(e.innerActive=e.inner=null);else for(var n=0;n<h.length;++n){var r=h[n];"\n"===r.open&&(e.innerActive=r,e.inner=m.startState(r.mode,t.indent?t.indent(e.outer,"",""):0))}},electricChars:d.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:d}}}}}),/**** mode/overlay.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(t){"use strict";t.overlayMode=function(r,o,i){return{startState:function(){return{base:t.startState(r),overlay:t.startState(o),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:t.copyState(r,e.base),overlay:t.copyState(o,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,t){return(e!=t.streamSeen||Math.min(t.basePos,t.overlayPos)<e.start)&&(t.streamSeen=e,t.basePos=t.overlayPos=e.start),e.start==t.basePos&&(t.baseCur=r.token(e,t.base),t.basePos=e.pos),e.start==t.overlayPos&&(e.pos=e.start,t.overlayCur=o.token(e,t.overlay),t.overlayPos=e.pos),e.pos=Math.min(t.basePos,t.overlayPos),null==t.overlayCur?t.baseCur:null!=t.baseCur&&t.overlay.combineTokens||i&&null==t.overlay.combineTokens?t.baseCur+" "+t.overlayCur:t.overlayCur},indent:r.indent&&function(e,t,n){return r.indent(e.base,t,n)},electricChars:r.electricChars,innerMode:function(e){return{state:e.base,mode:r}},blankLine:function(e){var t,n;return r.blankLine&&(t=r.blankLine(e.base)),o.blankLine&&(n=o.blankLine(e.overlay)),null==n?t:i&&null!=t?t+" "+n:n}}}}),/**** mode/simple.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(d){"use strict";function h(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function s(e,t){if(!e)return/(?:)/;var n="";return e=e instanceof RegExp?(e.ignoreCase&&(n="i"),e.source):String(e),new RegExp((!1===t?"":"^")+"(?:"+e+")",n)}function p(e,t){(e.next||e.push)&&h(t,e.next||e.push),this.regex=s(e.regex),this.token=function(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}(e.token),this.data=e}function c(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=0;for(var r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r)||!c(e[r],t[r]))return!1;n++}for(var r in t)t.hasOwnProperty(r)&&n--;return 0==n}function m(e,t,n,r){var o;if(n.persistent)for(var i=t.persistentStates;i&&!o;i=i.next)(n.spec?c(n.spec,i.spec):n.mode==i.mode)&&(o=i);var l=o?o.mode:n.mode||d.getMode(e,n.spec),a=o?o.state:d.startState(l);n.persistent&&!o&&(t.persistentStates={mode:l,spec:n.spec,state:a,next:t.persistentStates}),t.localState=a,t.local={mode:l,end:n.end&&s(n.end),endScan:n.end&&!1!==n.forceEnd&&s(n.end,!1),endToken:r&&r.join?r[r.length-1]:r}}d.defineSimpleMode=function(e,t){d.defineMode(e,function(e){return d.simpleMode(e,t)})},d.simpleMode=function(e,t){h(t,"start");var n={},r=t.meta||{},o=!1;for(var i in t)if(i!=r&&t.hasOwnProperty(i))for(var l=n[i]=[],a=t[i],s=0;s<a.length;s++){var c=a[s];l.push(new p(c,t)),(c.indent||c.dedent)&&(o=!0)}var f={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:o?[]:null}},copyState:function(e){var t={state:e.state,pending:e.pending,local:e.local,localState:null,indent:e.indent&&e.indent.slice(0)};e.localState&&(t.localState=d.copyState(e.local.mode,e.localState)),e.stack&&(t.stack=e.stack.slice(0));for(var n=e.persistentStates;n;n=n.next)t.persistentStates={mode:n.mode,spec:n.spec,state:n.state==e.localState?t.localState:d.copyState(n.mode,n.state),next:t.persistentStates};return t},token:function(u,d){return function(e,t){if(t.pending){var n=t.pending.shift();return 0==t.pending.length&&(t.pending=null),e.pos+=n.text.length,n.token}if(t.local){if(t.local.end&&e.match(t.local.end)){var r=t.local.endToken||null;return t.local=t.localState=null,r}var o;r=t.local.mode.token(e,t.localState);return t.local.endScan&&(o=t.local.endScan.exec(e.current()))&&(e.pos=e.start+o.index),r}for(var i=u[t.state],l=0;l<i.length;l++){var a=i[l],s=(!a.data.sol||e.sol())&&e.match(a.regex);if(s){a.data.next?t.state=a.data.next:a.data.push?((t.stack||(t.stack=[])).push(t.state),t.state=a.data.push):a.data.pop&&t.stack&&t.stack.length&&(t.state=t.stack.pop()),a.data.mode&&m(d,t,a.data.mode,a.token),a.data.indent&&t.indent.push(e.indentation()+d.indentUnit),a.data.dedent&&t.indent.pop();var c=a.token;if(c&&c.apply&&(c=c(s)),2<s.length&&a.token&&"string"!=typeof a.token){t.pending=[];for(var f=2;f<s.length;f++)s[f]&&t.pending.push({text:s[f],token:a.token[f-1]});return e.backUp(s[0].length-(s[1]?s[1].length:0)),c[0]}return c&&c.join?c[0]:c}}return e.next(),null}}(n,e),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:function(s,c){return function(e,t,n){if(e.local&&e.local.mode.indent)return e.local.mode.indent(e.localState,t,n);if(null==e.indent||e.local||c.dontIndentStates&&-1<function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}(e.state,c.dontIndentStates))return d.Pass;var r=e.indent.length-1,o=s[e.state];e:for(;;){for(var i=0;i<o.length;i++){var l=o[i];if(l.data.dedent&&!1!==l.data.dedentIfLineStart){var a=l.regex.exec(t);if(a&&a[0]){r--,(l.next||l.push)&&(o=s[l.next||l.push]),t=t.slice(a[0].length);continue e}}}break}return r<0?0:e.indent[r]}}(n,r)};if(r)for(var u in r)r.hasOwnProperty(u)&&(f[u]=r[u]);return f}}),/**** runmode/colorize.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./runmode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./runmode"],e):e(CodeMirror)}(function(l){"use strict";var r=/^(p|li|div|h\\d|pre|blockquote|td)$/;function a(e,t){if(3==e.nodeType)return t.push(e.nodeValue);for(var n=e.firstChild;n;n=n.nextSibling)a(n,t),r.test(e.nodeType)&&t.push("\n")}l.colorize=function(e,t){e=e||document.body.getElementsByTagName("pre");for(var n=0;n<e.length;++n){var r=e[n],o=r.getAttribute("data-lang")||t;if(o){var i=[];a(r,i),r.innerHTML="",l.runMode(i.join(""),o,r),r.className+=" cm-s-default"}}}}),/**** runmode/runmode.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(m){"use strict";m.runMode=function(e,t,n,r){var o=m.getMode(m.defaults,t),s=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<9);if(n.appendChild){var c=r&&r.tabSize||m.defaults.tabSize,f=n,u=0;f.innerHTML="",n=function(e,t){if("\n"==e)return f.appendChild(document.createTextNode(s?"\r":e)),void(u=0);for(var n="",r=0;;){var o=e.indexOf("\t",r);if(-1==o){n+=e.slice(r),u+=e.length-r;break}u+=o-r,n+=e.slice(r,o);var i=c-u%c;u+=i;for(var l=0;l<i;++l)n+=" ";r=o+1}if(t){var a=f.appendChild(document.createElement("span"));a.className="cm-"+t.replace(/ +/g," cm-"),a.appendChild(document.createTextNode(n))}else f.appendChild(document.createTextNode(n))}}for(var i=m.splitLines(e),l=r&&r.state||m.startState(o),a=0,d=i.length;a<d;++a){a&&n("\n");var h=new m.StringStream(i[a]);for(!h.string&&o.blankLine&&o.blankLine(l);!h.eol();){var p=o.token(h,l);n(h.current(),p,a,h.start,l),h.start=h.pos}}}}),/**** scroll/annotatescrollbar.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function n(e){clearTimeout(r.doRedraw),r.doRedraw=setTimeout(function(){r.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var r=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(r.doUpdate),r.doUpdate=setTimeout(function(){r.computeScale()&&n(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),!1!==t.listenForChanges&&e.on("changes",this.changeHandler=function(){n(250)})}e.defineExtension("annotateScrollbar",function(e){return"string"==typeof e&&(e={className:e}),new t(this,e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,t=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.getScrollerElement().scrollHeight;if(t!=this.hScale)return this.hScale=t,!0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){!1!==e&&this.computeScale();var n=this.cm,t=this.hScale,r=document.createDocumentFragment(),o=this.annotations,i=n.getOption("lineWrapping"),l=i&&1.5*n.defaultTextHeight(),a=null,s=null;function c(e,t){return a!=e.line&&(a=e.line,s=n.getLineHandle(a)),s.widgets&&s.widgets.length||i&&s.height>l?n.charCoords(e,"local")[t?"top":"bottom"]:n.heightAtLine(s,"local")+(t?0:s.height)}var f=n.lastLine();if(n.display.barWidth)for(var u,d=0;d<o.length;d++){var h=o[d];if(!(h.to.line>f)){for(var p=u||c(h.from,!0)*t,m=c(h.to,!1)*t;d<o.length-1&&!(o[d+1].to.line>f)&&!(m+.9<(u=c(o[d+1].from,!0)*t));)m=c((h=o[++d]).to,!1)*t;if(m!=p){var g=Math.max(m-p,3),v=r.appendChild(document.createElement("div"));v.style.cssText="position: absolute; right: 0px; width: "+Math.max(n.display.barWidth-1,2)+"px; top: "+(p+this.buttonHeight)+"px; height: "+g+"px",v.className=this.options.className,h.id&&v.setAttribute("annotation-id",h.id)}}}this.div.textContent="",this.div.appendChild(r)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),/**** scroll/scrollpastend.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){"use strict";function o(e,t){r.changeEnd(t).line==e.lastLine()&&i(e)}function i(e){var t="";1<e.lineCount()&&(t=e.display.scroller.clientHeight-30-e.getLineHandle(e.lastLine()).height+"px");e.state.scrollPastEndPadding!=t&&(e.state.scrollPastEndPadding=t,e.display.lineSpace.parentNode.style.paddingBottom=t,e.off("refresh",i),e.setSize(),e.on("refresh",i))}r.defineOption("scrollPastEnd",!1,function(e,t,n){n&&n!=r.Init&&(e.off("change",o),e.off("refresh",i),e.display.lineSpace.parentNode.style.paddingBottom="",e.state.scrollPastEndPadding=null),t&&(e.on("change",o),e.on("refresh",i),i(e))})}),/**** scroll/simplescrollbars.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(a){"use strict";function r(e,t,n){this.orientation=t,this.scroll=n,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=e+"-"+t,this.inner=this.node.appendChild(document.createElement("div"));var l=this;function r(e){var t=a.wheelEventPixels(e)["horizontal"==l.orientation?"x":"y"],n=l.pos;l.moveTo(l.pos+t),l.pos!=n&&a.e_preventDefault(e)}a.on(this.inner,"mousedown",function(e){if(1==e.which){a.e_preventDefault(e);var t="horizontal"==l.orientation?"pageX":"pageY",n=e[t],r=l.pos;a.on(document,"mousemove",i),a.on(document,"mouseup",o)}function o(){a.off(document,"mousemove",i),a.off(document,"mouseup",o)}function i(e){if(1!=e.which)return o();l.moveTo(r+(e[t]-n)*(l.total/l.size))}}),a.on(this.node,"click",function(e){a.e_preventDefault(e);var t,n=l.inner.getBoundingClientRect();t="horizontal"==l.orientation?e.clientX<n.left?-1:e.clientX>n.right?1:0:e.clientY<n.top?-1:e.clientY>n.bottom?1:0,l.moveTo(l.pos+t*l.screen)}),a.on(this.node,"mousewheel",r),a.on(this.node,"DOMMouseScroll",r)}r.prototype.setPos=function(e,t){return e<0&&(e=0),e>this.total-this.screen&&(e=this.total-this.screen),!(!t&&e==this.pos)&&(this.pos=e,this.inner.style["horizontal"==this.orientation?"left":"top"]=e*(this.size/this.total)+"px",!0)},r.prototype.moveTo=function(e){this.setPos(e)&&this.scroll(e,this.orientation)};function n(e,t,n){this.addClass=e,this.horiz=new r(e,"horizontal",n),t(this.horiz.node),this.vert=new r(e,"vertical",n),t(this.vert.node),this.width=null}r.prototype.update=function(e,t,n){var r=this.screen!=t||this.total!=e||this.size!=n;r&&(this.screen=t,this.total=e,this.size=n);var o=this.screen*(this.size/this.total);o<10&&(this.size-=10-o,o=10),this.inner.style["horizontal"==this.orientation?"width":"height"]=o+"px",this.setPos(this.pos,r)},n.prototype.update=function(e){if(null==this.width){var t=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;t&&(this.width=parseInt(t.height))}var n=this.width||0,r=e.scrollWidth>e.clientWidth+1,o=e.scrollHeight>e.clientHeight+1;return this.vert.node.style.display=o?"block":"none",this.horiz.node.style.display=r?"block":"none",o&&(this.vert.update(e.scrollHeight,e.clientHeight,e.viewHeight-(r?n:0)),this.vert.node.style.bottom=r?n+"px":"0"),r&&(this.horiz.update(e.scrollWidth,e.clientWidth,e.viewWidth-(o?n:0)-e.barLeft),this.horiz.node.style.right=o?n+"px":"0",this.horiz.node.style.left=e.barLeft+"px"),{right:o?n:0,bottom:r?n:0}},n.prototype.setScrollTop=function(e){this.vert.setPos(e)},n.prototype.setScrollLeft=function(e){this.horiz.setPos(e)},n.prototype.clear=function(){var e=this.horiz.node.parentNode;e.removeChild(this.horiz.node),e.removeChild(this.vert.node)},a.scrollbarModel.simple=function(e,t){return new n("CodeMirror-simplescroll",e,t)},a.scrollbarModel.overlay=function(e,t){return new n("CodeMirror-overlayscroll",e,t)}}),/**** search/jump-to-line.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function i(e,t){var n=Number(t);return/^[-+]/.test(t)?e.getCursor().line+n:n-1}e.commands.jumpToLine=function(r){var o=r.getCursor();!function(e,t,n,r,o){e.openDialog?e.openDialog(t,o,{value:r,selectValueOnOpen:!0}):o(prompt(n,r))}(r,function(e){return e.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use line:column or scroll% syntax)")+"</span>"}(r),r.phrase("Jump to line:"),o.line+1+":"+o.ch,function(e){var t;if(e)if(t=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(e))r.setCursor(i(r,t[1]),Number(t[2]));else if(t=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(e)){var n=Math.round(r.lineCount()*Number(t[1])/100);/^[-+]/.test(t[1])&&(n=o.line+n+1),r.setCursor(n-1,o.ch)}else(t=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(e))&&r.setCursor(i(r,t[1]),o.ch)})},e.keyMap.default["Alt-G"]="jumpToLine"}),/**** search/match-highlighter.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],e):e(CodeMirror)}(function(o){"use strict";var n={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};function i(e){for(var t in this.options={},n)this.options[t]=(e&&e.hasOwnProperty(t)?e:n)[t];this.overlay=this.timeout=null,this.matchesonscroll=null,this.active=!1}function l(e){var t=e.state.matchHighlighter;(t.active||e.hasFocus())&&r(e,t)}function a(e){var t=e.state.matchHighlighter;t.active||(t.active=!0,r(e,t))}function r(e,t){clearTimeout(t.timeout),t.timeout=setTimeout(function(){s(e)},t.options.delay)}function f(e,t,n,r){var o=e.state.matchHighlighter;if(e.addOverlay(o.overlay=function(t,n,r){return{token:function(e){if(e.match(t)&&(!n||function(e,t){return!(e.start&&t.test(e.string.charAt(e.start-1))||e.pos!=e.string.length&&t.test(e.string.charAt(e.pos)))}(e,n)))return r;e.next(),e.skipTo(t.charAt(0))||e.skipToEnd()}}}(t,n,r)),o.options.annotateScrollbar&&e.showMatchesOnScrollbar){var i=n?new RegExp("\\b"+t.replace(/[\\\[.+*?(){|^$]/g,"\\$&")+"\\b"):t;o.matchesonscroll=e.showMatchesOnScrollbar(i,!1,{className:"CodeMirror-selection-highlight-scrollbar"})}}function u(e){var t=e.state.matchHighlighter;t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null,t.matchesonscroll&&(t.matchesonscroll.clear(),t.matchesonscroll=null))}function s(c){c.operation(function(){var e=c.state.matchHighlighter;if(u(c),c.somethingSelected()||!e.options.showToken){var t=c.getCursor("from"),n=c.getCursor("to");if(t.line==n.line&&(!e.options.wordsOnly||function(e,t,n){{if(null===e.getRange(t,n).match(/^\w+$/))return!1;if(0<t.ch){var r={line:t.line,ch:t.ch-1};if(null===e.getRange(r,t).match(/\W/))return!1}if(n.ch<e.getLine(t.line).length){r={line:n.line,ch:n.ch+1};if(null===e.getRange(n,r).match(/\W/))return!1}return!0}}(c,t,n))){var r=c.getRange(t,n);e.options.trim&&(r=r.replace(/^\s+|\s+$/g,"")),r.length>=e.options.minChars&&f(c,r,!1,e.options.style)}}else{for(var o=!0===e.options.showToken?/[\w$]/:e.options.showToken,i=c.getCursor(),l=c.getLine(i.line),a=i.ch,s=a;a&&o.test(l.charAt(a-1));)--a;for(;s<l.length&&o.test(l.charAt(s));)++s;a<s&&f(c,l.slice(a,s),o,e.options.style)}})}o.defineOption("highlightSelectionMatches",!1,function(e,t,n){if(n&&n!=o.Init&&(u(e),clearTimeout(e.state.matchHighlighter.timeout),e.state.matchHighlighter=null,e.off("cursorActivity",l),e.off("focus",a)),t){var r=e.state.matchHighlighter=new i(t);e.hasFocus()?(r.active=!0,s(e)):e.on("focus",a),e.on("cursorActivity",l)}})}),/**** search/matchesonscrollbar.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(c){"use strict";function r(e,t,n,r){this.cm=e,this.options=r;var o={listenForChanges:!1};for(var i in r)o[i]=r[i];o.className||(o.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(o),this.query=t,this.caseFold=n,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var l=this;e.on("change",this.changeHandler=function(e,t){l.onChange(t)})}c.defineExtension("showMatchesOnScrollbar",function(e,t,n){return"string"==typeof n&&(n={className:n}),new r(this,e,t,n=n||{})});function f(e,t,n){return e<=t?e:Math.max(t,e+n)}r.prototype.findMatches=function(){if(this.gap){for(var e=0;e<this.matches.length;e++){if((r=this.matches[e]).from.line>=this.gap.to)break;r.to.line>=this.gap.from&&this.matches.splice(e--,1)}for(var t=this.cm.getSearchCursor(this.query,c.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),n=this.options&&this.options.maxMatches||1e3;t.findNext();){var r;if((r={from:t.from(),to:t.to()}).from.line>=this.gap.to)break;if(this.matches.splice(e++,0,r),this.matches.length>n)break}this.gap=null}},r.prototype.onChange=function(e){var t=e.from.line,n=c.changeEnd(e).line,r=n-e.to.line;if(this.gap?(this.gap.from=Math.min(f(this.gap.from,t,r),e.from.line),this.gap.to=Math.max(f(this.gap.to,t,r),e.from.line)):this.gap={from:e.from.line,to:n+1},r)for(var o=0;o<this.matches.length;o++){var i=this.matches[o],l=f(i.from.line,t,r);l!=i.from.line&&(i.from=c.Pos(l,i.from.ch));var a=f(i.to.line,t,r);a!=i.to.line&&(i.to=c.Pos(a,i.to.ch))}clearTimeout(this.update);var s=this;this.update=setTimeout(function(){s.updateAfterChange()},250)},r.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},r.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),/**** search/search.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(s){"use strict";function t(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function c(e){return e.state.search||(e.state.search=new t)}function r(e){return"string"==typeof e&&e==e.toLowerCase()}function f(e,t,n){return e.getSearchCursor(t,n,{caseFold:r(t),multiline:!0})}function u(e,t,n,r,o){e.openDialog?e.openDialog(t,o,{value:r,selectValueOnOpen:!0}):o(prompt(n,r))}function d(e){return e.replace(/\\([nrt\\])/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"==t?"\\":e})}function o(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=d(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function h(e,t,n){t.queryText=n,t.query=o(n),e.removeOverlay(t.overlay,r(t.query)),t.overlay=function(n,e){return"string"==typeof n?n=new RegExp(n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e?"gi":"g"):n.global||(n=new RegExp(n.source,n.ignoreCase?"gi":"g")),{token:function(e){n.lastIndex=e.pos;var t=n.exec(e.string);if(t&&t.index==e.pos)return e.pos+=t[0].length||1,"searching";t?e.pos=t.index:e.skipToEnd()}}}(t.query,r(t.query)),e.addOverlay(t.overlay),e.showMatchesOnScrollbar&&(t.annotate&&(t.annotate.clear(),t.annotate=null),t.annotate=e.showMatchesOnScrollbar(t.query,r(t.query)))}function n(i,t,e,n){var r=c(i);if(r.query)return p(i,t);var o=i.getSelection()||r.lastQuery;if(o instanceof RegExp&&"x^"==o.source&&(o=null),e&&i.openDialog){var l=null,a=function(e,t){s.e_stop(t),e&&(e!=r.queryText&&(h(i,r,e),r.posFrom=r.posTo=i.getCursor()),l&&(l.style.opacity=1),p(i,t.shiftKey,function(e,t){var n;t.line<3&&document.querySelector&&(n=i.display.wrapper.querySelector(".CodeMirror-dialog"))&&n.getBoundingClientRect().bottom-4>i.cursorCoords(t,"window").top&&((l=n).style.opacity=.4)}))};!function(e,t,n,r,o){e.openDialog(t,r,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){m(e)},onKeyDown:o})}(i,g(i),o,a,function(e,t){var n=s.keyName(e),r=i.getOption("extraKeys"),o=r&&r[n]||s.keyMap[i.getOption("keyMap")][n];"findNext"==o||"findPrev"==o||"findPersistentNext"==o||"findPersistentPrev"==o?(s.e_stop(e),h(i,c(i),t),i.execCommand(o)):"find"!=o&&"findPersistent"!=o||(s.e_stop(e),a(t,e))}),n&&o&&(h(i,r,o),p(i,t))}else u(i,g(i),"Search for:",o,function(e){e&&!r.query&&i.operation(function(){h(i,r,e),r.posFrom=r.posTo=i.getCursor(),p(i,t)})})}function p(n,r,o){n.operation(function(){var e=c(n),t=f(n,e.query,r?e.posFrom:e.posTo);(t.find(r)||(t=f(n,e.query,r?s.Pos(n.lastLine()):s.Pos(n.firstLine(),0))).find(r))&&(n.setSelection(t.from(),t.to()),n.scrollIntoView({from:t.from(),to:t.to()},20),e.posFrom=t.from(),e.posTo=t.to(),o&&o(t.from(),t.to()))})}function m(t){t.operation(function(){var e=c(t);e.lastQuery=e.query,e.query&&(e.query=e.queryText=null,t.removeOverlay(e.overlay),e.annotate&&(e.annotate.clear(),e.annotate=null))})}function g(e){return'<span class="CodeMirror-search-label">'+e.phrase("Search:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function v(t,r,o){t.operation(function(){for(var e=f(t,r);e.findNext();)if("string"!=typeof r){var n=t.getRange(e.from(),e.to()).match(r);e.replace(o.replace(/\$(\d)/g,function(e,t){return n[t]}))}else e.replace(o)})}function i(a,e){if(!a.getOption("readOnly")){var t=a.getSelection()||c(a).lastQuery,n='<span class="CodeMirror-search-label">'+(e?a.phrase("Replace all:"):a.phrase("Replace:"))+"</span>";u(a,n+function(e){return' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}(a),n,t,function(l){l&&(l=o(l),u(a,function(e){return'<span class="CodeMirror-search-label">'+e.phrase("With:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>'}(a),a.phrase("Replace with:"),"",function(r){if(r=d(r),e)v(a,l,r);else{m(a);var o=f(a,l,a.getCursor("from")),i=function(){var e,t=o.from();!(e=o.findNext())&&(o=f(a,l),!(e=o.findNext())||t&&o.from().line==t.line&&o.from().ch==t.ch)||(a.setSelection(o.from(),o.to()),a.scrollIntoView({from:o.from(),to:o.to()}),function(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}(a,function(e){return'<span class="CodeMirror-search-label">'+e.phrase("Replace?")+"</span> <button>"+e.phrase("Yes")+"</button> <button>"+e.phrase("No")+"</button> <button>"+e.phrase("All")+"</button> <button>"+e.phrase("Stop")+"</button> "}(a),a.phrase("Replace?"),[function(){n(e)},i,function(){v(a,l,r)}]))},n=function(n){o.replace("string"==typeof l?r:r.replace(/\$(\d)/g,function(e,t){return n[t]})),i()};i()}}))})}}s.commands.find=function(e){m(e),n(e)},s.commands.findPersistent=function(e){m(e),n(e,!1,!0)},s.commands.findPersistentNext=function(e){n(e,!1,!0,!0)},s.commands.findPersistentPrev=function(e){n(e,!0,!0,!0)},s.commands.findNext=n,s.commands.findPrev=function(e){n(e,!0)},s.commands.clearSearch=m,s.commands.replace=i,s.commands.replaceAll=function(e){i(e,!0)}}),/**** search/searchcursor.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";var v,y,b=o.Pos;function p(e,t){for(var n=function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e),r=n,o=0;o<t.length;o++)-1==r.indexOf(t.charAt(o))&&(r+=t.charAt(o));return n==r?e:new RegExp(e.source,r)}function m(e,t,n){t=p(t,"g");for(var r=n.line,o=n.ch,i=e.lastLine();r<=i;r++,o=0){t.lastIndex=o;var l=e.getLine(r),a=t.exec(l);if(a)return{from:b(r,a.index),to:b(r,a.index+a[0].length),match:a}}}function g(e,t){for(var n,r=0;;){t.lastIndex=r;var o=t.exec(e);if(!o)return n;if((r=(n=o).index+(n[0].length||1))==e.length)return n}}function C(e,t,n,r){if(e.length==t.length)return n;for(var o=0,i=n+Math.max(0,e.length-t.length);;){if(o==i)return o;var l=o+i>>1,a=r(e.slice(0,l)).length;if(a==n)return l;n<a?i=l:o=1+l}}function r(n,r,e,t){var o;this.atOccurrence=!1,this.doc=n,e=e?n.clipPos(e):b(0,0),this.pos={from:e,to:e},"object"==typeof t?o=t.caseFold:(o=t,t=null),"string"==typeof r?(null==o&&(o=!1),this.matches=function(e,t){return(e?function(e,t,n,r){if(!t.length)return null;var o=r?v:y,i=o(t).split(/\r|\n\r?/);e:for(var l=n.line,a=n.ch,s=e.firstLine()-1+i.length;s<=l;l--,a=-1){var c=e.getLine(l);-1<a&&(c=c.slice(0,a));var f=o(c);if(1==i.length){var u=f.lastIndexOf(i[0]);if(-1==u)continue e;return{from:b(l,C(c,f,u,o)),to:b(l,C(c,f,u+i[0].length,o))}}var d=i[i.length-1];if(f.slice(0,d.length)==d){var h=1;for(n=l-i.length+1;h<i.length-1;h++)if(o(e.getLine(n+h))!=i[h])continue e;var p=e.getLine(l+1-i.length),m=o(p);if(m.slice(m.length-i[0].length)==i[0])return{from:b(l+1-i.length,C(p,m,p.length-i[0].length,o)),to:b(l,C(c,f,d.length,o))}}}}:function(e,t,n,r){if(!t.length)return null;var o=r?v:y,i=o(t).split(/\r|\n\r?/);e:for(var l=n.line,a=n.ch,s=e.lastLine()+1-i.length;l<=s;l++,a=0){var c=e.getLine(l).slice(a),f=o(c);if(1==i.length){var u=f.indexOf(i[0]);if(-1==u)continue e;n=C(c,f,u,o)+a;return{from:b(l,C(c,f,u,o)+a),to:b(l,C(c,f,u+i[0].length,o)+a)}}var d=f.length-i[0].length;if(f.slice(d)==i[0]){for(var h=1;h<i.length-1;h++)if(o(e.getLine(l+h))!=i[h])continue e;var p=e.getLine(l+i.length-1),m=o(p),g=i[i.length-1];if(m.slice(0,g.length)==g)return{from:b(l,C(c,f,d,o)+a),to:b(l+i.length-1,C(p,m,g.length,o))}}}})(n,r,t,o)}):(r=p(r,"gm"),t&&!1===t.multiline?this.matches=function(e,t){return(e?function(e,t,n){t=p(t,"g");for(var r=n.line,o=n.ch,i=e.firstLine();i<=r;r--,o=-1){var l=e.getLine(r);-1<o&&(l=l.slice(0,o));var a=g(l,t);if(a)return{from:b(r,a.index),to:b(r,a.index+a[0].length),match:a}}}:m)(n,r,t)}:this.matches=function(e,t){return(e?function(e,t,n){t=p(t,"gm");for(var r,o=1,i=n.line,l=e.firstLine();l<=i;){for(var a=0;a<o;a++){var s=e.getLine(i--);r=null==r?s.slice(0,n.ch):s+"\n"+r}o*=2;var c=g(r,t);if(c){var f=r.slice(0,c.index).split("\n"),u=c[0].split("\n"),d=i+f.length,h=f[f.length-1].length;return{from:b(d,h),to:b(d+u.length-1,1==u.length?h+u[0].length:u[u.length-1].length),match:c}}}}:function(e,t,n){if(!function(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}(t))return m(e,t,n);t=p(t,"gm");for(var r,o=1,i=n.line,l=e.lastLine();i<=l;){for(var a=0;a<o&&!(l<i);a++){var s=e.getLine(i++);r=null==r?s:r+"\n"+s}o*=2,t.lastIndex=n.ch;var c=t.exec(r);if(c){var f=r.slice(0,c.index).split("\n"),u=c[0].split("\n"),d=n.line+f.length-1,h=f[f.length-1].length;return{from:b(d,h),to:b(d+u.length-1,1==u.length?h+u[0].length:u[u.length-1].length),match:c}}}})(n,r,t)})}y=String.prototype.normalize?(v=function(e){return e.normalize("NFD").toLowerCase()},function(e){return e.normalize("NFD")}):(v=function(e){return e.toLowerCase()},function(e){return e}),r.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){for(var t=this.matches(e,this.doc.clipPos(e?this.pos.from:this.pos.to));t&&0==o.cmpPos(t.from,t.to);)e?t.from.ch?t.from=b(t.from.line,t.from.ch-1):t=t.from.line==this.doc.firstLine()?null:this.matches(e,this.doc.clipPos(b(t.from.line-1))):t.to.ch<this.doc.getLine(t.to.line).length?t.to=b(t.to.line,t.to.ch+1):t=t.to.line==this.doc.lastLine()?null:this.matches(e,b(t.to.line+1,0));if(t)return this.pos=t,this.atOccurrence=!0,this.pos.match||!0;var n=b(e?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:n,to:n},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,t){if(this.atOccurrence){var n=o.splitLines(e);this.doc.replaceRange(n,this.pos.from,this.pos.to,t),this.pos.to=b(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},o.defineExtension("getSearchCursor",function(e,t,n){return new r(this.doc,e,t,n)}),o.defineDocExtension("getSearchCursor",function(e,t,n){return new r(this,e,t,n)}),o.defineExtension("selectMatches",function(e,t){for(var n=[],r=this.getSearchCursor(e,this.getCursor("from"),t);r.findNext()&&!(0<o.cmpPos(r.to(),this.getCursor("to")));)n.push({anchor:r.from(),head:r.to()});n.length&&this.setSelections(n,0)})}),/**** selection/active-line.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";var a="CodeMirror-activeline",s="CodeMirror-activeline-background",c="CodeMirror-activeline-gutter";function f(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",a),e.removeLineClass(e.state.activeLines[t],"background",s),e.removeLineClass(e.state.activeLines[t],"gutter",c)}function i(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.getOption("styleActiveLine");if("object"==typeof i&&i.nonEmpty?o.anchor.line==o.head.line:o.empty()){var l=t.getLineHandleVisualStart(o.head.line);n[n.length-1]!=l&&n.push(l)}}!function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}(t.state.activeLines,n)&&t.operation(function(){f(t);for(var e=0;e<n.length;e++)t.addLineClass(n[e],"wrap",a),t.addLineClass(n[e],"background",s),t.addLineClass(n[e],"gutter",c);t.state.activeLines=n})}function l(e,t){i(e,t.ranges)}o.defineOption("styleActiveLine",!1,function(e,t,n){var r=n!=o.Init&&n;t!=r&&(r&&(e.off("beforeSelectionChange",l),f(e),delete e.state.activeLines),t&&(e.state.activeLines=[],i(e,e.listSelections()),e.on("beforeSelectionChange",l)))})}),/**** selection/mark-selection.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";function i(e){e.state.markedSelection&&e.operation(function(){!function(e){if(!e.somethingSelected())return s(e);if(1<e.listSelections().length)return c(e);var t=e.getCursor("start"),n=e.getCursor("end"),r=e.state.markedSelection;if(!r.length)return a(e,t,n);var o=r[0].find(),i=r[r.length-1].find();if(!o||!i||n.line-t.line<=d||0<=p(t,i.to)||p(n,o.from)<=0)return c(e);for(;0<p(t,o.from);)r.shift().clear(),o=r[0].find();p(t,o.from)<0&&(o.to.line-t.line<d?(r.shift().clear(),a(e,t,o.to,0)):a(e,t,o.from,0));for(;p(n,i.to)<0;)r.pop().clear(),i=r[r.length-1].find();0<p(n,i.to)&&(n.line-i.from.line<d?(r.pop().clear(),a(e,i.from,n)):a(e,i.to,n))}(e)})}function l(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation(function(){s(e)})}o.defineOption("styleSelectedText",!1,function(e,t,n){var r=n&&n!=o.Init;t&&!r?(e.state.markedSelection=[],e.state.markedSelectionStyle="string"==typeof t?t:"CodeMirror-selectedtext",c(e),e.on("cursorActivity",i),e.on("change",l)):!t&&r&&(e.off("cursorActivity",i),e.off("change",l),s(e),e.state.markedSelection=e.state.markedSelectionStyle=null)});var d=8,h=o.Pos,p=o.cmpPos;function a(e,t,n,r){if(0!=p(t,n))for(var o=e.state.markedSelection,i=e.state.markedSelectionStyle,l=t.line;;){var a=l==t.line?t:h(l,0),s=l+d,c=s>=n.line,f=c?n:h(s,0),u=e.markText(a,f,{className:i});if(null==r?o.push(u):o.splice(r++,0,u),c)break;l=s}}function s(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function c(e){s(e);for(var t=e.listSelections(),n=0;n<t.length;n++)a(e,t[n].from(),t[n].to())}}),/**** selection/selection-pointer.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){"use strict";function o(e){e.state.selectionPointer.rects=null,i(e)}function i(e){e.state.selectionPointer.willUpdate||(e.state.selectionPointer.willUpdate=!0,setTimeout(function(){!function(e){var t=e.state.selectionPointer;if(!t)return;if(null==t.rects&&null!=t.mouseX&&(t.rects=[],e.somethingSelected()))for(var n=e.display.selectionDiv.firstChild;n;n=n.nextSibling)t.rects.push(n.getBoundingClientRect());var r=!1;if(null!=t.mouseX)for(var o=0;o<t.rects.length;o++){var i=t.rects[o];i.left<=t.mouseX&&i.right>=t.mouseX&&i.top<=t.mouseY&&i.bottom>=t.mouseY&&(r=!0)}var l=r?t.value:"";e.display.lineDiv.style.cursor!=l&&(e.display.lineDiv.style.cursor=l)}(e),e.state.selectionPointer.willUpdate=!1},50))}r.defineOption("selectionPointer",!1,function(t,e){var n=t.state.selectionPointer;n&&(r.off(t.getWrapperElement(),"mousemove",n.mousemove),r.off(t.getWrapperElement(),"mouseout",n.mouseout),r.off(window,"scroll",n.windowScroll),t.off("cursorActivity",o),t.off("scroll",o),t.state.selectionPointer=null,t.display.lineDiv.style.cursor=""),e&&(n=t.state.selectionPointer={value:"string"==typeof e?e:"default",mousemove:function(e){!function(e,t){var n=e.state.selectionPointer;(null==t.buttons?t.which:t.buttons)?n.mouseX=n.mouseY=null:(n.mouseX=t.clientX,n.mouseY=t.clientY);i(e)}(t,e)},mouseout:function(e){!function(e,t){if(!e.getWrapperElement().contains(t.relatedTarget)){var n=e.state.selectionPointer;n.mouseX=n.mouseY=null,i(e)}}(t,e)},windowScroll:function(){o(t)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},r.on(t.getWrapperElement(),"mousemove",n.mousemove),r.on(t.getWrapperElement(),"mouseout",n.mouseout),r.on(window,"scroll",n.windowScroll),t.on("cursorActivity",o),t.on("scroll",o))})}),/**** tern/tern.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(v){"use strict";v.TernServer=function(e){var n=this;this.options=e||{};var t=this.options.plugins||(this.options.plugins={});t.doc_comment||(t.doc_comment=!0),this.docs=Object.create(null),this.options.useWorker?this.server=new i(this):this.server=new tern.Server({getFile:function(e,t){return l(n,e,t)},async:!0,defs:this.options.defs||[],plugins:t}),this.trackChange=function(e,t){!function(e,t,n){var r=u(e,t),o=e.cachedArgHints;o&&o.doc==t&&0<=C(o.start,n.to)&&(e.cachedArgHints=null);var i=r.changed;null==i&&(r.changed=i={from:n.from.line,to:n.from.line});var l=n.from.line+(n.text.length-1);n.from.line<i.to&&(i.to=i.to-(n.to.line-l));l>=i.to&&(i.to=l+1);i.from>n.from.line&&(i.from=n.from.line);t.lineCount()>f&&100<n.to-i.from&&setTimeout(function(){r.changed&&100<r.changed.to-r.changed.from&&a(e,r)},200)}(n,e,t)},this.cachedArgHints=null,this.activeArgHints=null,this.jumpStack=[],this.getHint=function(e,t){return function(u,d,h){u.request(d,{type:"completions",types:!0,docs:!0,urls:!0},function(e,t){if(e)return S(u,d,e);var n=[],r="",o=t.start,i=t.end;'["'==d.getRange(y(o.line,o.ch-2),o)&&'"]'!=d.getRange(i,y(i.line,i.ch+2))&&(r='"]');for(var l=0;l<t.completions.length;++l){var a=t.completions[l],s=m(a.type);t.guess&&(s+=" "+p+"guess"),n.push({text:a.name+r,displayText:a.displayName||a.name,className:s,data:a})}var c={from:o,to:i,list:n},f=null;v.on(c,"close",function(){k(f)}),v.on(c,"update",function(){k(f)}),v.on(c,"select",function(e,t){k(f);var n=u.options.completionTip?u.options.completionTip(e.data):e.data.doc;n&&((f=w(t.parentNode.getBoundingClientRect().right+window.pageXOffset,t.getBoundingClientRect().top+window.pageYOffset,n)).className+=" "+p+"hint-doc")}),h(c)})}(n,e,t)},this.getHint.async=!0},v.TernServer.prototype={addDoc:function(e,t){var n={doc:t,name:e,changed:null};return this.server.addFile(e,T(this,n)),v.on(t,"change",this.trackChange),this.docs[e]=n},delDoc:function(e){var t=n(this,e);t&&(v.off(t.doc,"change",this.trackChange),delete this.docs[t.name],this.server.delFile(t.name))},hideDoc:function(e){M(this);var t=n(this,e);t&&t.changed&&a(this,t)},complete:function(e){e.showHint({hint:this.getHint})},showType:function(e,t,n){r(this,e,t,"type",n)},showDocs:function(e,t,n){r(this,e,t,"documentation",n)},updateArgHints:function(e){!function(n,r){if(M(n),r.somethingSelected())return;var e=r.getTokenAt(r.getCursor()).state,t=v.innerMode(r.getMode(),e);if("javascript"!=t.mode.name)return;var o=t.state.lexical;if("call"!=o.info)return;for(var i,l=o.pos||0,a=r.getOption("tabSize"),s=r.getCursor().line,c=Math.max(0,s-9),f=!1;c<=s;--s){for(var u=r.getLine(s),d=0,h=0;;){var p=u.indexOf("\t",h);if(-1==p)break;d+=a-(p+d)%a-1,h=p+1}if(i=o.column-d,"("==u.charAt(i)){f=!0;break}}if(!f)return;var m=y(s,i),g=n.cachedArgHints;if(g&&g.doc==r.getDoc()&&0==C(m,g.start))return b(n,r,l);n.request(r,{type:"type",preferFunction:!0,end:m},function(e,t){!e&&t.type&&/^fn\(/.test(t.type)&&(n.cachedArgHints={start:m,type:function(o){var e=[],i=3;function t(e){for(var t=0,n=i;;){var r=o.charAt(i);if(e.test(r)&&!t)return o.slice(n,i);/[{\[\(]/.test(r)?++t:/[}\]\)]/.test(r)&&--t,++i}}if(")"!=o.charAt(i))for(;;){var n=o.slice(i).match(/^([^, \(\[\{]+): /);if(n&&(i+=n[0].length,n=n[1]),e.push({name:n,type:t(/[\),]/)}),")"==o.charAt(i))break;i+=2}var r=o.slice(i).match(/^\) -> (.*)$/);return{args:e,rettype:r&&r[1]}}(t.type),name:t.exprName||t.name||"fn",guess:t.guess,doc:r.getDoc()},b(n,r,l))})}(this,e)},jumpToDef:function(e){!function(i,l){function t(e){var t={type:"definition",variable:e||null},o=u(i,l.getDoc());i.server.request(d(i,o,t),function(e,t){if(e)return S(i,l,e);if(t.file||!t.url){if(t.file){var n,r=i.docs[t.file];if(r&&(n=function(e,t){for(var n=t.context.slice(0,t.contextOffset).split("\n"),r=t.start.line-(n.length-1),o=y(r,(1==n.length?t.start.ch:e.getLine(r).length)-n[0].length),i=e.getLine(r).slice(o.ch),l=1+r;l<e.lineCount()&&i.length<t.context.length;++l)i+="\n"+e.getLine(l);if(i.slice(0,t.context.length)==t.context)return t;var a,s=e.getSearchCursor(t.context,0,!1),c=1/0;for(;s.findNext();){var f=s.from(),u=1e4*Math.abs(f.line-o.line);(u=u||Math.abs(f.ch-o.ch))<c&&(a=f,c=u)}if(!a)return null;1==n.length?a.ch+=n[0].length:a=y(a.line+(n.length-1),n[n.length-1].length);if(t.start.line==t.end.line)var d=y(a.line,a.ch+(t.end.ch-t.start.ch));else d=y(a.line+(t.end.line-t.start.line),t.end.ch);return{start:a,end:d}}(r.doc,t)))return i.jumpStack.push({file:o.name,start:l.getCursor("from"),end:l.getCursor("to")}),void s(i,o,r,n.start,n.end)}S(i,l,"Could not find a definition.")}else window.open(t.url)})}!function(e){var t=e.getCursor("end"),n=e.getTokenAt(t);return!(n.start<t.ch&&"comment"==n.type)&&/[\w)\]]/.test(e.getLine(t.line).slice(Math.max(t.ch-1,0),t.ch+1))}(l)?o(l,"Jump to variable",function(e){e&&t(e)}):t()}(this,e)},jumpBack:function(e){!function(e,t){var n=e.jumpStack.pop(),r=n&&e.docs[n.file];if(!r)return;s(e,u(e,t.getDoc()),r,n.start,n.end)}(this,e)},rename:function(e){!function(n,r){var e=r.getTokenAt(r.getCursor());if(!/\w/.test(e.string))return S(n,r,"Not at a variable");o(r,"New name for "+e.string,function(e){n.request(r,{type:"rename",newName:e,fullDocs:!0},function(e,t){if(e)return S(n,r,e);!function(e,t){for(var n=Object.create(null),r=0;r<t.length;++r){var o=t[r];(n[o.file]||(n[o.file]=[])).push(o)}for(var i in n){var l=e.docs[i],a=n[i];if(l){a.sort(function(e,t){return C(t.start,e.start)});var s="*rename"+ ++c;for(r=0;r<a.length;++r){o=a[r];l.doc.replaceRange(o.text,o.start,o.end,s)}}}}(n,t.changes)})})}(this,e)},selectName:function(e){!function(a,s){var c=u(a,s.doc).name;a.request(s,{type:"refs"},function(e,t){if(e)return S(a,s,e);for(var n=[],r=0,o=s.getCursor(),i=0;i<t.refs.length;i++){var l=t.refs[i];l.file==c&&(n.push({anchor:l.start,head:l.end}),0<=C(o,l.start)&&C(o,l.end)<=0&&(r=n.length-1))}s.setSelections(n,r)})}(this,e)},request:function(e,n,r,t){var o=this,i=u(this,e.getDoc()),l=d(this,i,n,t),a=l.query&&this.options.queryOptions&&this.options.queryOptions[l.query.type];if(a)for(var s in a)l.query[s]=a[s];this.server.request(l,function(e,t){!e&&o.options.responseFilter&&(t=o.options.responseFilter(i,n,l,e,t)),r(e,t)})},destroy:function(){M(this),this.worker&&(this.worker.terminate(),this.worker=null)}};var y=v.Pos,p="CodeMirror-Tern-",f=250;function l(e,t,n){var r=e.docs[t];r?n(T(e,r)):e.options.getFile?e.options.getFile(t,n):n(null)}function u(e,t,n){for(var r in e.docs){var o=e.docs[r];if(o.doc==t)return o}if(!n)for(var i=0;;++i)if(r="[doc"+(i||"")+"]",!e.docs[r]){n=r;break}return e.addDoc(n,t)}function n(e,t){return"string"==typeof t?e.docs[t]:(t instanceof v&&(t=t.getDoc()),t instanceof v.Doc?u(e,t):void 0)}function a(e,t){e.server.request({files:[{type:"full",name:t.name,text:T(e,t)}]},function(e){e?window.console.error(e):t.changed=null})}function m(e){var t;return t="?"==e?"unknown":"number"==e||"string"==e||"bool"==e?e:/^fn\(/.test(e)?"fn":/^\[/.test(e)?"array":"object",p+"completion "+p+"completion-"+t}function r(o,i,e,t,l){o.request(i,t,function(e,t){if(e)return S(o,i,e);if(o.options.typeTip)var n=o.options.typeTip(t);else{n=h("span",null,h("strong",null,t.type||"not found"));if(t.doc&&n.appendChild(document.createTextNode(" — "+t.doc)),t.url){n.appendChild(document.createTextNode(" "));var r=n.appendChild(h("a",null,"[docs]"));r.href=t.url,r.target="_blank"}}g(i,n,o),l&&l()},e)}function b(e,t,n){M(e);for(var r=e.cachedArgHints,o=r.type,i=h("span",r.guess?p+"fhint-guess":null,h("span",p+"fname",r.name),"("),l=0;l<o.args.length;++l){l&&i.appendChild(document.createTextNode(", "));var a=o.args[l];i.appendChild(h("span",p+"farg"+(l==n?" "+p+"farg-current":""),a.name||"?")),"?"!=a.type&&(i.appendChild(document.createTextNode(": ")),i.appendChild(h("span",p+"type",a.type)))}i.appendChild(document.createTextNode(o.rettype?") -> ":")")),o.rettype&&i.appendChild(h("span",p+"type",o.rettype));var s=t.cursorCoords(null,"page"),c=e.activeArgHints=w(s.right+1,s.bottom,i);setTimeout(function(){c.clear=x(t,function(){e.activeArgHints==c&&M(e)})},20)}function s(e,t,n,r,o){n.doc.setSelection(r,o),t!=n&&e.options.switchToDoc&&(M(e),e.options.switchToDoc(n.name,n.doc))}var c=0;function d(e,t,n,r){var o=[],i=0,l=!n.fullDocs;l||delete n.fullDocs,"string"==typeof n&&(n={type:n}),n.lineCharPositions=!0,null==n.end&&(n.end=r||t.doc.getCursor("end"),t.doc.somethingSelected()&&(n.start=t.doc.getCursor("start")));var a=n.start||n.end;if(t.changed)if(t.doc.lineCount()>f&&!1!=l&&t.changed.to-t.changed.from<100&&t.changed.from<=a.line&&t.changed.to>n.end.line){o.push(function(e,t,n){for(var r,o=e.doc,i=null,l=null,a=t.line-1,s=Math.max(0,a-50);s<=a;--a){var c=o.getLine(a);if(!(c.search(/\bfunction\b/)<0)){var f=v.countColumn(c,null,4);null!=i&&i<=f||(i=f,l=a)}}null==l&&(l=s);var u=Math.min(o.lastLine(),n.line+20);if(null==i||i==v.countColumn(o.getLine(t.line),null,4))r=u;else for(r=n.line+1;r<u;++r){if((f=v.countColumn(o.getLine(r),null,4))<=i)break}var d=y(l,0);return{type:"part",name:e.name,offsetLines:d.line,text:o.getRange(d,y(r,n.line==r?null:0))}}(t,a,n.end)),n.file="#0";i=o[0].offsetLines;null!=n.start&&(n.start=y(n.start.line- -i,n.start.ch)),n.end=y(n.end.line-i,n.end.ch)}else o.push({type:"full",name:t.name,text:T(e,t)}),n.file=t.name,t.changed=null;else n.file=t.name;for(var s in e.docs){var c=e.docs[s];c.changed&&c!=t&&(o.push({type:"full",name:c.name,text:T(e,c)}),c.changed=null)}return{query:n,files:o}}var C=v.cmpPos;function h(e,t){var n=document.createElement(e);t&&(n.className=t);for(var r=2;r<arguments.length;++r){var o=arguments[r];"string"==typeof o&&(o=document.createTextNode(o)),n.appendChild(o)}return n}function o(e,t,n){e.openDialog?e.openDialog(t+": <input type=text>",n):n(prompt(t,""))}function g(e,t,n){e.state.ternTooltip&&k(e.state.ternTooltip);var r=e.cursorCoords(),o=e.state.ternTooltip=w(r.right+1,r.bottom,t);function i(){e.state.ternTooltip=null,o.parentNode&&function(e){e.style.opacity="0",setTimeout(function(){k(e)},1100)}(o),s()}var l=!1,a=!1;v.on(o,"mousemove",function(){l=!0}),v.on(o,"mouseout",function(e){var t=e.relatedTarget||e.toElement;t&&v.contains(o,t)||(a?i():l=!1)}),setTimeout(function(){a=!0,l||i()},n.options.hintDelay?n.options.hintDelay:1700);var s=x(e,i)}function x(e,t){return e.on("cursorActivity",t),e.on("blur",t),e.on("scroll",t),e.on("setDoc",t),function(){e.off("cursorActivity",t),e.off("blur",t),e.off("scroll",t),e.off("setDoc",t)}}function w(e,t,n){var r=h("div",p+"tooltip",n);return r.style.left=e+"px",r.style.top=t+"px",document.body.appendChild(r),r}function k(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function S(e,t,n){e.options.showError?e.options.showError(t,n):g(t,String(n),e)}function M(e){e.activeArgHints&&(e.activeArgHints.clear&&e.activeArgHints.clear(),k(e.activeArgHints),e.activeArgHints=null)}function T(e,t){var n=t.doc.getValue();return e.options.fileFilter&&(n=e.options.fileFilter(n,t.name,t.doc)),n}function i(t){var n=t.worker=new Worker(t.options.workerScript);n.postMessage({type:"init",defs:t.options.defs,plugins:t.options.plugins,scripts:t.options.workerDeps});var r=0,o={};function i(e,t){t&&(e.id=++r,o[r]=t),n.postMessage(e)}n.onmessage=function(e){var n=e.data;"getFile"==n.type?l(t,n.name,function(e,t){i({type:"getFile",err:String(e),text:t,id:n.id})}):"debug"==n.type?window.console.log(n.message):n.id&&o[n.id]&&(o[n.id](n.err,n.body),delete o[n.id])},n.onerror=function(e){for(var t in o)o[t](e);o={}},this.addFile=function(e,t){i({type:"add",name:e,text:t})},this.delFile=function(e){i({type:"del",name:e})},this.request=function(e,t){i({type:"req",body:e},t)}}}),/**** wrap/hardwrap.js ****/
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(b){"use strict";var C=b.Pos;function s(e,t,n){for(var r=n.paragraphStart||e.getHelper(t,"paragraphStart"),o=t.line,i=e.firstLine();i<o;--o){var l=e.getLine(o);if(r&&r.test(l))break;if(!/\S/.test(l)){++o;break}}for(var a=n.paragraphEnd||e.getHelper(t,"paragraphEnd"),s=t.line+1,c=e.lastLine();s<=c;++s){l=e.getLine(s);if(a&&a.test(l)){++s;break}if(!/\S/.test(l))break}return{from:o,to:s}}function x(e,t,n,r){for(var o=t;o<e.length&&" "==e.charAt(o);)o++;for(;0<o&&!n.test(e.slice(o-1,o+1));--o);for(var i=!0;;i=!1){var l=o;if(r)for(;" "==e.charAt(l-1);)--l;if(0!=l||!i)return{from:l,to:o};o=t}}function c(n,e,t,r){e=n.clipPos(e),t=n.clipPos(t);var o=r.column||80,i=r.wrapOn||/\s\S|-[^\.\d]/,l=!1!==r.killTrailingSpace,a=[],s="",c=e.line,f=n.getRange(e,t,!1);if(!f.length)return null;var u=f[0].match(/^[ \t]*/)[0];u.length>=o&&(o=u.length+1);for(var d=0;d<f.length;++d){var h=f[d],p=s.length,m=0;s&&h&&!i.test(s.charAt(s.length-1)+h.charAt(0))&&(s+=" ",m=1);var g="";if(d&&(g=h.match(/^\s*/)[0],h=h.slice(g.length)),s+=h,d){var v=s.length>o&&u==g&&x(s,o,i,l);v&&v.from==p&&v.to==p+m?(s=u+h,++c):a.push({text:[m?" ":""],from:C(c,p),to:C(c+1,g.length)})}for(;s.length>o;){var y=x(s,o,i,l);a.push({text:["",u],from:C(c,y.from),to:C(c,y.to)}),s=u+s.slice(y.to),++c}}return a.length&&n.operation(function(){for(var e=0;e<a.length;++e){var t=a[e];(t.text||b.cmpPos(t.from,t.to))&&n.replaceRange(t.text,t.from,t.to)}}),a.length?{from:a[0].from,to:b.changeEnd(a[a.length-1])}:null}b.defineExtension("wrapParagraph",function(e,t){t=t||{},e=e||this.getCursor();var n=s(this,e,t);return c(this,C(n.from,0),C(n.to-1),t)}),b.commands.wrapLines=function(l){l.operation(function(){for(var e=l.listSelections(),t=l.lastLine()+1,n=e.length-1;0<=n;n--){var r,o=e[n];if(o.empty()){var i=s(l,o.head,{});r={from:C(i.from,0),to:C(i.to-1)}}else r={from:o.from(),to:o.to()};r.to.line>=t||(t=r.from.line,c(l,r.from,r.to,{}))}})},b.defineExtension("wrapRange",function(e,t,n){return c(this,e,t,n||{})}),b.defineExtension("wrapParagraphsInRange",function(e,t,n){n=n||{};for(var r=this,o=[],i=e.line;i<=t.line;){var l=s(r,C(i,0),n);o.push(l),i=l.to}var a=!1;return o.length&&r.operation(function(){for(var e=o.length-1;0<=e;--e)a=a||c(r,C(o[e].from,0),C(o[e].to-1),n)}),a})});