tabIndent={version:"0.1.8",config:{tab:"\t"},events:{keydown:function(e){var t=tabIndent.config.tab,n=t.length;if(9===e.keyCode){e.preventDefault();var s=this.selectionStart,i=this.selectionEnd;if(!1===e.shiftKey)if(tabIndent.isMultiLine(this)){for(var a=(u=tabIndent.findStartIndices(this)).length,l=void 0,r=void 0,d=0;a--;){var o=u[a];u[a+1]&&s!=u[a+1]&&(o=u[a+1]),s<=o&&u[a]<i&&(this.value=this.value.slice(0,u[a])+t+this.value.slice(u[a]),l=u[a],r=r||(u[a+1]?u[a+1]-1:"end"),d++)}this.selectionStart=l,this.selectionEnd="end"!==r?r+n*d:this.value.length}else this.value=this.value.slice(0,s)+t+this.value.slice(s),this.selectionStart=s+n,this.selectionEnd=i+n;else if(tabIndent.isMultiLine(this)){for(a=(u=tabIndent.findStartIndices(this)).length,l=void 0,r=void 0,d=0;a--;){o=u[a];u[a+1]&&s!=u[a+1]&&(o=u[a+1]),s<=o&&u[a]<i&&(this.value.substr(u[a],n)==t&&(this.value=this.value.slice(0,u[a])+this.value.slice(u[a]+n),d++),l=u[a],r=r||(u[a+1]?u[a+1]-1:"end"))}this.selectionStart=l,this.selectionEnd="end"!==r?r-d*n:this.value.length}else this.value.substr(s-n,n)==t?(this.value=this.value.substr(0,s-n)+this.value.substr(s),this.selectionStart=s-n,this.selectionEnd=i-n):"\n"==this.value.substr(s-1,1)&&this.value.substr(s,n)==t&&(this.value=this.value.substring(0,s)+this.value.substr(s+n),this.selectionStart=s,this.selectionEnd=i-n)}else if(27===e.keyCode)tabIndent.events.disable(e);else if(13===e.keyCode&&!1===e.shiftKey){var u,A=tabIndent,h=this.selectionStart,c=(u=A.findStartIndices(this)).length,v=0,b=0,f=new RegExp("^"+t.replace("\t","\\t").replace(/ /g,"\\s")+"+","g"),g="";tabs=null;for(var I=0;I<c;I++){if(u[I+1]&&h>=u[I]&&h<u[I+1]){v=u[I],b=u[I+1]-1;break}v=u[c-1],b=this.value.length}if(g=this.value.slice(v,b),tabs=g.match(f),null!==tabs){e.preventDefault();var m=tabs[0],E=m.length,y=h-v;y<E&&(E=y,m=m.slice(0,y)),this.value=this.value.slice(0,h)+"\n"+m+this.value.slice(h),this.selectionStart=h+E+1,this.selectionEnd=this.selectionStart}}},disable:function(e){tabIndent.remove(e.target)},focus:function(){var n=tabIndent,s=this,t=setTimeout(function(){var e=(s.getAttribute("class")||"").split(" "),t=e.indexOf("tabIndent");s.addEventListener("keydown",n.events.keydown),s.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAKZSURBVEjH7ZRfSFNRHMe/9+/+3G26tUn+ycywgURgUBAUJlIhWlEQEjN8yQcfolKJxJAefOjRCnT0IPYQ9iRa9FAYJiaUVP4twf7gzJzpnDbdzHt3z+3Fua3dO4Ne/f5ezjmc8+F7zvmeA2zrv0VFGlexAssFw1mG1pqqUL8npGY60Bw3ykYaOVjlrFXmEyw0AQj6g53UONQBO8DBzuiT2tUx+gR/mwACBQpIUoACBZoAZaOSiWwFIFs4oMMS9/boZVF8T8vtkbEofatiRKF9mXK6M7tTyyxRaPwWtJezIu9+9cNzxHk/n9938rz6IWpvgRdZd5/HcsvC9jadqk6Z0qkBiCaAF3UtX8cy6h1mwlnLhsuZuRvqABlyNJqb0q0ZWsb7uUVHlXAahWl1y3M2tVuQVR1Q0Pl0dwZ67KbZtGnX/ma++/FsCCY1ANlAxIuT2NZP3XB/GRKc9qKhKTYnd4auJbIqINEBDa5zoWWByoS1jocR+loKpKGJKqBLybN/OQN2Tmodv4jCtYIMYurnP5sLf+V5XK4DbFv4haaDCEABA/J88GdegD1I2+heY0Xj7M1itiMjP8srzutjXMbkIDZKCrAcfGOt8LwODimYnzzjLcHIx5VFwPekZrhVPYmxyVNAvZP8KV28SykClo6XF4/t9LpC2TTIteulJepJjD5nCjL8E56sMHt40NYYqE51ZnZIfmGXYBC68p/6v6UkApSI8Y2ejPVKhyE0PdLDPcg+Z003G0W7YUmmvo/WtjXgbiKAAQNGpjYRDOwWILx3dV16ZBsx3QsdYi4JNUw6uCvMbrUcWFAvPWznfH9/GQHR5xAbPuTumRFWvS+ZwDGyJFfidkxWk2oaIfTRk8RI0YqMAQBAL7YVrz/iUDx4QII4/QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMi0xMi0wMVQwMDowNjo0My0wNTowMLKpTWYAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTItMTItMDFUMDA6MDY6NDMtMDU6MDDD9PXaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==)",s.style.backgroundPosition="top right",s.style.backgroundRepeat="no-repeat",-1!==t&&e.splice(t,1),e.push("tabIndent-rendered"),s.setAttribute("class",e.join(" ")),s.removeEventListener("focus",n.events.keydown)},500);s.addEventListener("blur",function e(){clearTimeout(t),s.removeEventListener("blur",e)})}},render:function(e){var t=this;"TEXTAREA"===e.nodeName&&(e.addEventListener("focus",t.events.focus),e.addEventListener("blur",function(e){t.events.disable(e)}))},renderAll:function(){for(var e=document.getElementsByTagName("textarea"),t=e.length,n=void 0;t--;)-1!==(e[t].getAttribute("class")||"").split(" ").indexOf("tabIndent")&&(n=e[t],this.render(n)),-1,[],n=void 0},remove:function(e){if("TEXTAREA"===e.nodeName){var t=(e.getAttribute("class")||"").split(" "),n=t.indexOf("tabIndent-rendered");-1!==n&&(e.removeEventListener("keydown",this.events.keydown),e.style.backgroundImage="",t.splice(n,1),t.push("tabIndent"),e.setAttribute("class",1<t.length?t.join(" "):t[0]))}},removeAll:function(){for(var e=document.getElementsByTagName("textarea"),t=e.length,n=void 0;t--;)-1!==(e[t].getAttribute("class")||"").split(" ").indexOf("tabIndent-rendered")&&(n=e[t],this.remove(n)),-1,[],n=void 0},isMultiLine:function(e){var t=e.value.slice(e.selectionStart,e.selectionEnd);return!!new RegExp(/\n/).test(t)},findStartIndices:function(e){for(var t=e.value,n=[],s=0;t.match(/\n/)&&0<t.match(/\n/).length;){s=0<n.length?n[n.length-1]:0;var i=t.search("\n");n.push(i+s+1),t=t.substring(i+1)}return n.unshift(0),n}};