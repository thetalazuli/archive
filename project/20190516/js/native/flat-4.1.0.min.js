!function(t){"use strict";function p(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var e={flatten:function(t,a){var b=(a=a||{}).delimiter||".",s=a.maxDepth,j={};return function f(i,u,l){l=l||1,Object.keys(i).forEach(function(t){var e=i[t],r=a.safe&&Array.isArray(e),n=Object.prototype.toString.call(e),o=p(e),c=u?u+b+t:t;if(!r&&!o&&("[object Object]"===n||"[object Array]"===n)&&Object.keys(e).length&&(!a.maxDepth||l<s))return f(e,c,l+1);j[c]=e})}(t),j},unflatten:function(i,u){var l=(u=u||{}).delimiter||".",a=u.overwrite||!1,b={};if(p(i)||"[object Object]"!==Object.prototype.toString.call(i))return i;function s(t){var e=Number(t);return isNaN(e)||-1!==t.indexOf(".")||u.object?t:e}return Object.keys(i).sort(function(t,e){return t.length-e.length}).forEach(function(t){for(var e=t.split(l),r=s(e.shift()),n=s(e[0]),o=b;void 0!==n;){var c=Object.prototype.toString.call(o[r]),f="[object Object]"===c||"[object Array]"===c;if(!a&&!f&&void 0!==o[r])return;(a&&!f||!a&&null==o[r])&&(o[r]="number"!=typeof n||u.object?{}:[]),o=o[r],0<e.length&&(r=s(e.shift()),n=s(e[0]))}o[r]=unflatten(i[t],u)}),b}};"object"==typeof module&&"object"==module.exports?module.exports=e:"function"==typeof define&&define.amd?define("flat",e):t.flat=e}(this);