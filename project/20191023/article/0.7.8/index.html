 <style>
   @import url('/css/fomantic-ui/2.7.8.min.css');
   @import url('/js/native/code-mirror/5.48.4.min.css');
   @import url('/js/native/code-mirror/addon/dialog/dialog.css');
   @import url('/js/native/code-mirror/addon/hint/show-hint.css');
   @import url('/js/native/code-mirror/addon/fold/foldgutter.css');
   @import url('/js/native/code-mirror/addon/display/fullscreen.css');
   @import url('/js/native/code-mirror/addon/scroll/simplescrollbars.css');
   @import url('/js/native/code-mirror/addon/search/matchesonscrollbar.css');



   .ui.label[data-value~='grey'] {
     background-color: #767676;
     border-color: #767676;
   }
   .ui.label[data-value~='brown'] {
     background-color: #a5673f;
     border-color: #a5673f;
   }
   .ui.label[data-value~='pink'] {
     background-color: #e03997;
     border-color: #e03997;
   }
   .ui.label[data-value~='purple'] {
     background-color: #a333c8;
     border-color: #a333c8;
   }
   .ui.label[data-value~='violet'] {
     background-color: #6435c9;
     border-color: #6435c9;
   }
   .ui.label[data-value~='blue'] {
     background-color: #2185d0;
     border-color: #2185d0;
   }
   .ui.label[data-value~='teal'] {
     background-color: #00b5ad;
     border-color: #00b5ad;
   }
   .ui.label[data-value~='green'] {
     background-color: #21ba45;
     border-color: #21ba45;
   }
   .ui.label[data-value~='olive'] {
     background-color: #b5cc18;
     border-color: #b5cc18;
   }
   .ui.label[data-value~='yellow'] {
     background-color: #fbbd08;
     border-color: #fbbd08;
   }
   .ui.label[data-value~='orange'] {
     background-color: #f2711c;
     border-color: #f2711c;
   }
   .ui.label[data-value~='red'] {
     background-color: #db2828;
     border-color: #db2828;
   }
   .ui.label{
     color:white;
   }

   .ui.label.visible
     background-color: #fbbd08 !important;
     border-color: #fbbd08 !important;
     color:white;
   }


   .default.text .ui.label{
     color:black;
   }

   html,
   body{
     padding:1em;
     font:12px 'M+2VM+IPAG circle';
   }
   main{
     width:148mm;
     margin:0 auto;
   }
   .ui.multiple.search.dropdown>.text .ui.label>.icon{
     margin-right:0;
   }
   .ui.multiple.search.dropdown>.text{
     margin:0;
   }
   .ui.label>.close.icon, .ui.label>.delete.icon{
     display:none;
     vertical-align:top;
   }
   .ui.selection.dropdown{
     display:block;
   }
   .ui.dropdown .dropdown.icon{
     display:none;
   }
   .ui.selection.dropdown{
     border:none;
     min-height:auto;
     padding:.14285714em 0;
     background:transparent;
   }
   .ui.multiple.dropdown>.label{
     font-size:.85714286rem;
     padding:.5833em .833em;
   }
   .ui.menu,
   .ui.label,
   .ui.segments{
     box-shadow: rgba(16, 36, 94, 0.4) 0 2px 6px 0 !important;
     border-bottom: 2px solid rgba(34,36,38,.15) !important;
   }
   .ui.segment nav {
    position: absolute;
    text-align: right;
    width: calc(100%);
    z-index: 9;
    right: -1em;
    top: -1em;
   }
   .ui.label>.icon {
     margin-right: 0;
   }
   .ui.selection.dropdown{
     padding-top:0;
   }
   header:after{
     display:block;
     clear:both;
     content:'';
     height:0;
   }

   .ui.multiple.dropdown>.label {
    vertical-align: middle !important;
    margin-top:0;
   }
   .ui.segment.editor{
     padding:0;
   }
</style>

  <template id='dropdown'>
    <div ref='labels' :class='ui'>
      <input name='labels' type='hidden'>
      <div class='default text'>
        <div class='ui label orange'>
          <i class='icon tags'>
         </i>
       </div>
     </div>
      <div class='menu'>

     </div>
   </div>
 </template>

 <body>
   <main>

    <div class='ui grid padded'>


      <!-- ポイントを落としていませんか？選択を間違えていませんか？量は十分ですか？相談して下さい
      <div class='ui divider horizontal'>Draftです。コミットする前に承認を得て下さい。</div>-->


      <div class='row'>
        <div class='column'>
            <div class='ui segments'>

   

               <div class='ui segment' style='z-index:999;'>
              
                  <indexes :draft='draft' style='z-index:999;'>
                    </indexes>
                
               </div>


         
         
         
         
         
             </div>

        </div>
      </div>
      <div class='row'>
        <div class='column'>

            <div class='ui menu pointing icon'>
                <div class='item active'><i class='icon home'></i></div>
                <div class='item'><i class='icon user'></i></div>
                <div class='item'><i class='icon users'></i></div>
             </div>
          
        </div>
      </div>

        <div class='row'>
            <div class='column'>
  
                <div class='ui segments'>
                <div :class="['ui','segment']"  v-for='(page,color) in draft'>
         
                   <nav :class="['ui','labels',color]"><div class="ui label image" style="float: left;"><img src="https://avatars1.githubusercontent.com/u/9919?v=4">Things you might want to do right now:
                   </div><div class="ui label">1567939568879</div><div class="ui label" @click='edit(page)'><i class="icon edit"></i></div></nav>
         
                   <p></p>
                   <p>...</p>
                   <p></p>
               </div>
              </div>
<!--
                <div class='ui segments'>
    
                     <div class='ui segment editor'>
                       <codemirror v-model='content'>  
                      </codemirror>
                    
                      </div>
                </div>
            
            -->
              
            </div>
          </div>

    </div>





  </main>  
</body>
 <script src='/js/native/code-mirror/5.48.4.js'></script>
 <script src='/js/native/code-mirror/keymap/5.48.4.min.js'></script>
 <script src='/js/native/code-mirror/addon/5.48.4.min.js'></script>
 <script src='/js/native/code-mirror/mode/5.48.4.min.js'></script>

 <script src='/js/vue/2.6.10.js'></script>
 <script src='/js/jquery/3.4.1.min.js'></script>
 <script src='/js/jquery/plugin/fomantic-ui/2.7.8.min.js'></script>

 <script src='/js/vue/plugin/code-mirror/4.0.6.min.js'></script>

 <script src='dropdown.js'></script>
 <script>
   Vue.use(VueCodeMirror,{
      options:{
        scrollbarStyle  : 'simple',
        theme           : 'default',
        mode            : 'htmlmixed',
        firstLineNumber : 1,
        tabSize         : 2,
        indentUnit      : 2,
        matchTags       : {bothTags: true},
        htmlMode        : true,
        autoCloseTags   : true,
        foldGutter      : true,
        lineNumbers     : true,
        lineWrapping    : true,
        extraKeys: {
          'Ctrl-A': 'autocomplete',
          'Ctrl-Q': function(cm){
            cm.foldCode(cm.getCursor())
          },
          'F11': function(cm){
            cm.setOption("fullScreen", !cm.getOption("fullScreen"))
          }
        },
        gutters: [
          'CodeMirror-linenumbers',
          'CodeMirror-foldgutter'
        ]
      }
   })

   Vue.component('indexes',{
     mounted:function(){
      var list = [];
      
      var self = this
      Object.keys(this.colors).forEach(function(v,i){
        list.push(
          {
            name:self.test[i],
            value:i + ' ' + v
          }
        )
      })
      var self = this
      $(this.$refs.labels).dropdown({
         allowAdditions:true,
         onRemove:function(value,name){
           var color = value.split(' ')[1]
           console.dir(name)
           
           self.$delete(self.draft,color)

         },
         onAdd:function(value,name,$items){
           var color = value.split(' ')[1]
           console.dir($items)
           console.dir(value)
           console.dir(color)
           console.dir(name)

           self.$set(self.draft,color,{
             content:''
           })


         },
          // default textの中身消えるし、values書き換わったら（共同編集中に）を考えてDOM側でレンダリングしてみる
       })

      $(this.$refs.labels).dropdown('setup menu',{
        values: list 
      })



     },
     template:'#dropdown',
     props:['color','draft'],
     computed:{
       ui:function(){
         return ['ui dropdown selection multiple search','labels',this.color].join(' ')
       }
     },
     data:function(){
       return{
        test:[
          '仕様',
          '設計',
          '備考',
          '実装',
          '検証',
          '納品',
          '問題',
          '課題',
          '技術',
          '仕組',
          '説明',
          '要求',
        ],
        colors:{
        'grey':{},
        'brown':{},
        'pink':{},
        'purple':{},
        'violet':{},
        'blue':{},
        'teal':{},
        'green':{},
        'olive':{},
        'yellow':{},
        'orange':{},
        'red':{}
        },
        
       }
     }
   })

   new Vue({
     el:'main',
     data:{
       draft:{},
       content:'',
     },
     methods:{

     },
     mounted:function(){
       
     }
   })
</script>